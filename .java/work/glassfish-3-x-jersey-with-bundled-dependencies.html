<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
  <!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <title>
      Glassfish 3.x - Jersey with bundled dependencies &#8211; Bloggure
    </title>
    <meta
      name="description"
      content="Multi author blog about programming, computing and geek stuff"
    />
    <meta
      name="keywords"
      content="classnotfoundexception, glassfish, java, jax-rs, Jersey, Rest, sun-web"
    />

    <!-- Open Graph -->
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta
      property="og:title"
      content="Glassfish 3.x - Jersey with bundled dependencies"
    />
    <meta
      property="og:description"
      content="Multi author blog about programming, computing and geek stuff"
    />
    <meta
      property="og:url"
      content="http://www.bloggure.info/.java/work/glassfish-3-x-jersey-with-bundled-dependencies"
    />
    <meta property="og:site_name" content="Bloggure" />

    <link
      rel="canonical"
      href="http://www.bloggure.info/.java/work/glassfish-3-x-jersey-with-bundled-dependencies"
    />
    <link
      href="http://www.bloggure.info/feed.xml"
      type="application/atom+xml"
      rel="alternate"
      title="Bloggure Feed"
    />

    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- For all browsers -->
    <link
      rel="stylesheet"
      href="http://www.bloggure.info/assets/css/main.css"
    />
    <!-- Webfonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic"
      rel="stylesheet"
      type="text/css"
    />

    <meta http-equiv="cleartype" content="on" />

    <!-- Load Modernizr -->
    <script src="http://www.bloggure.info/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

    <!-- Icons -->
    <!-- 16x16 -->
    <link rel="shortcut icon" href="http://www.bloggure.info/favicon.ico" />
    <!-- 32x32 -->
    <link rel="shortcut icon" href="http://www.bloggure.info/favicon.png" />
    <!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
    <link
      rel="apple-touch-icon-precomposed"
      href="http://www.bloggure.info/images/apple-touch-icon-precomposed.png"
    />
    <!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
    <link
      rel="apple-touch-icon-precomposed"
      sizes="72x72"
      href="http://www.bloggure.info/images/apple-touch-icon-72x72-precomposed.png"
    />
    <!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
    <link
      rel="apple-touch-icon-precomposed"
      sizes="114x114"
      href="http://www.bloggure.info/images/apple-touch-icon-114x114-precomposed.png"
    />
    <!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
    <link
      rel="apple-touch-icon-precomposed"
      sizes="144x144"
      href="http://www.bloggure.info/images/apple-touch-icon-144x144-precomposed.png"
    />
  </head>

  <body id="post">
    <!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

    <div class="entry-header">
      <header class="header-title">
        <div class="header-title-wrap">
          <h1 class="entry-title" itemprop="name">
            <a href="http://www.bloggure.info/">Bloggure</a>
          </h1>
        </div>
        <!-- /.header-title-wrap -->
      </header>
    </div>

    <div id="main" role="main">
      <article class="hentry">
        <div class="entry-content">
          <header>
            <div class="entry-meta">
              <span class="entry-date date published updated"
                ><time
                  datetime="2011-07-18T00:00:00+02:00"
                  itemprop="datePublished"
                  ><a
                    href="http://www.bloggure.info/.java/work/glassfish-3-x-jersey-with-bundled-dependencies"
                    >July 18, 2011</a
                  ></time
                ></span
              ><span
                class="author vcard"
                itemprop="author"
                itemscope
                itemtype="http://schema.org/Person"
                ><span itemprop="name" class="fn"
                  ><a
                    href="http://www.bloggure.info/cgatay"
                    title="About cgatay"
                    itemprop="url"
                    >cgatay</a
                  ></span
                ></span
              >&nbsp; &bull; &nbsp;<span class="entry-comments"
                ><a
                  href="http://www.bloggure.info/.java/work/glassfish-3-x-jersey-with-bundled-dependencies#disqus_thread"
                  >Comment</a
                ></span
              >
            </div>
            <!-- /.entry-meta -->

            <h1 class="entry-title" itemprop="name">
              <a
                href="http://www.bloggure.info/.java/work/glassfish-3-x-jersey-with-bundled-dependencies"
                rel="bookmark"
                title="Glassfish 3.x - Jersey with bundled dependencies"
                itemprop="url"
                >Glassfish 3.x - Jersey with bundled dependencies</a
              >
            </h1>
          </header>
          <!--:en--><img
            class="size-full wp-image-71 alignright"
            title="glassfish"
            src="/images/uploads/2010/11/glassfish.png"
            alt=""
            width="92"
            height="50"
          />

          <p>
            I just wanted to make a small post regarding an issue I spent almost
            a day getting rid off. I have a quite typical web architecture :
          </p>
          <ul>
            <li>jar module encapsulating business logic (EJBs)</li>
            <li>war module providing front end web access</li>
            <li>war module for web service access (using JAX-RS)</li>
          </ul>

          <h2>The headache</h2>
          <p>
            Each war module depends on the ejb-client counterpart present in
            WEB-INF/lib. The problem I faced is that my @EJB injections was
            raising ClassNotFoundExceptions. I tried bypassing automatic
            injection with manual JNDI lookups but the same errors occurred.
            Playing with the debugger I found that the jars present in lib
            folder were not added into the web application's classloader.
          </p>
          <h2>The workaround</h2>
          <p>
            I spent a lot of time trying many things to fix this and found out
            the trick by downloading Jersey's sample. You simply have to have a
            sun-web.xml with the following content :
            <figure class="highlight">
              <pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;sun-web-app&gt;</span>
<span class="w">  </span><span class="nt">&lt;class-loader</span><span class="w"> </span><span class="na">delegate=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;&lt;/class-loader&gt;</span>
<span class="nt">&lt;/sun-web-app&gt;</span></code></pre>
            </figure>
          </p>

          <p>I hope it will help someone else!</p>
          <!--:--><!--:fr<a rel="attachment wp-att-71" href="http://www.bloggure.info/work/glassfish-v3-custom-log-levels.html/attachment/glassfish"><img class="size-full wp-image-71 alignright" title="glassfish" src="/images/uploads/2010/11/glassfish.png" alt="" width="92" height="50" /></a>
Je voulais juste faire un petit billet concernant un soucis que j'ai mis quasiment une journée à résoudre. J'ai une application web avec une architecture assez commune : 
<ul>
	<li>un module métier (packagé dans un jar composé d'EJBs)</li>
	<li>un module web frontal (packagé dans un war)</li>
	<li>un module web pour les web services (utilisant exclusivement JAX-RS, packagé dans un war)</li>
</ul>
<h2>Le casse tête!</h2>
Chaque module war a une dépendance sur la partie ejb cliente du module métier (présents dans le WEB-INF/lib donc). Le problème que j'ai rencontré est que l'injection de dépendances dans mon module web-service (@EJB) lève des ClassNotFoundExceptions. J'ai essayé de passer outre l'injection automatique par le conteneur en faisant une recherche manuelle dans l'annuaire JNDI mais ceci s'est soldé par un échec avec la même erreur à la clef.
En jouant avec le débuggueur, je me suis rendu compte que les jars présents dans le dossier lib n'étaient pas ajoutés au classloader de l'application web.
<h2>La solution</h2>
J'ai passé longtemps à essayer beaucoup de choses pour corriger ce problème et j'ai trouvé l'astuce dans les exemples d'utilisation de Jersey.<br/>
Il suffit simplement d'avoir un fichier sun-web.xml avec le contenu suivant :
<pre class="brush: xml"><sun-web-app>
  <class-loader delegate="true"></class-loader>
</sun-web-app>
</pre>
J'espère aider quelqu'un d'autre avec cette astuce !-->

          <footer class="entry-meta">
            <span class="entry-tags"
              ><a
                href="http://www.bloggure.info/tags/#classnotfoundexception"
                title="Pages tagged classnotfoundexception"
                class="tag"
                ><span class="term">classnotfoundexception</span></a
              ><a
                href="http://www.bloggure.info/tags/#glassfish"
                title="Pages tagged glassfish"
                class="tag"
                ><span class="term">glassfish</span></a
              ><a
                href="http://www.bloggure.info/tags/#java"
                title="Pages tagged java"
                class="tag"
                ><span class="term">java</span></a
              ><a
                href="http://www.bloggure.info/tags/#jax-rs"
                title="Pages tagged jax-rs"
                class="tag"
                ><span class="term">jax-rs</span></a
              ><a
                href="http://www.bloggure.info/tags/#Jersey"
                title="Pages tagged Jersey"
                class="tag"
                ><span class="term">Jersey</span></a
              ><a
                href="http://www.bloggure.info/tags/#Rest"
                title="Pages tagged Rest"
                class="tag"
                ><span class="term">Rest</span></a
              ><a
                href="http://www.bloggure.info/tags/#sun-web"
                title="Pages tagged sun-web"
                class="tag"
                ><span class="term">sun-web</span></a
              ></span
            >

            <div class="social-share">
              <ul class="socialcount socialcount-small inline-list">
                <li class="facebook">
                  <a
                    href="https://www.facebook.com/sharer/sharer.php?u=http://www.bloggure.info/.java/work/glassfish-3-x-jersey-with-bundled-dependencies"
                    title="Share on Facebook"
                    ><span class="count"
                      ><i class="fa fa-facebook-square"></i> Like</span
                    ></a
                  >
                </li>
                <li class="twitter">
                  <a
                    href="https://twitter.com/intent/tweet?text=http://www.bloggure.info/.java/work/glassfish-3-x-jersey-with-bundled-dependencies"
                    title="Share on Twitter"
                    ><span class="count"
                      ><i class="fa fa-twitter-square"></i> Tweet</span
                    ></a
                  >
                </li>
              </ul>
            </div>
            <!-- /.social-share -->
          </footer>
        </div>
        <!-- /.entry-content -->
        <section id="disqus_thread"></section>
        <!-- /#disqus_thread -->
        <div class="read-more">
          <div class="read-more-header">
            <a
              href="http://www.bloggure.info/.java/.shell/thoughts/first-thoughts-on-os-x-lion"
              class="read-more-btn"
              >Read More</a
            >
          </div>
          <!-- /.read-more-header -->
          <div class="read-more-content">
            <h3>
              <a
                href="http://www.bloggure.info/Module_Registration_Swift"
                title="Swift module registration"
                >Swift module registration</a
              >
            </h3>
            <p>
              Swift module registrationLet’s modularize our Swift code!I am
              using tuist for a while now in my projects. This tool was
              initially bring i...&hellip;
              <a href="http://www.bloggure.info/Module_Registration_Swift"
                >Continue reading</a
              >
            </p>
          </div>
          <!-- /.read-more-content -->

          <div class="read-more-list">
            <div class="list-item">
              <h4>
                <a
                  href="http://www.bloggure.info/Swift_VisibleForTesting_Macro"
                  title="Swift macro : @VisibleForTesting"
                  >Swift macro : @VisibleForTesting</a
                >
              </h4>
              <span>Published on April 19, 2024</span>
            </div>
            <!-- /.list-item -->

            <div class="list-item">
              <h4>
                <a
                  href="http://www.bloggure.info/iOS-DarkModeBackground-App-Switcher"
                  title="Dark Mode iOS Snapshot"
                  >Dark Mode iOS Snapshot</a
                >
              </h4>
              <span>Published on January 10, 2021</span>
            </div>
            <!-- /.list-item -->
          </div>
          <!-- /.read-more-list -->
        </div>
        <!-- /.read-more -->
      </article>
    </div>
    <!-- /#main -->

    <div class="footer-wrapper">
      <footer role="contentinfo">
        <span
          >&copy; 2025 . Powered by
          <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using a theme
          based on
          <a
            href="https://mademistakes.com/work/hpstr-jekyll-theme/"
            rel="nofollow"
            >HPSTR</a
          >.</span
        >
      </footer>
    </div>
    <!-- /.footer-wrapper -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
      window.jQuery ||
        document.write(
          '<script src="http://www.bloggure.info/assets/js/vendor/jquery-1.9.1.min.js"><\/script>'
        );
    </script>
    <script src="http://www.bloggure.info/assets/js/scripts.min.js"></script>

    <!-- Asynchronous Google Analytics snippet -->
    <script>
      (function (i, s, o, g, r, a, m) {
        i["GoogleAnalyticsObject"] = r;
        (i[r] =
          i[r] ||
          function () {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(
        window,
        document,
        "script",
        "//www.google-analytics.com/analytics.js",
        "ga"
      );

      ga("create", "UA-11718843-3", "auto");
      ga("require", "linkid", "linkid.js");
      ga("send", "pageview");
    </script>

    <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = "thereisnoplacelike1"; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
        var dsq = document.createElement("script");
        dsq.type = "text/javascript";
        dsq.async = true;
        dsq.src = "//" + disqus_shortname + ".disqus.com/embed.js";
        (
          document.getElementsByTagName("head")[0] ||
          document.getElementsByTagName("body")[0]
        ).appendChild(dsq);
      })();

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
        var s = document.createElement("script");
        s.async = true;
        s.type = "text/javascript";
        s.src = "//" + disqus_shortname + ".disqus.com/count.js";
        (
          document.getElementsByTagName("HEAD")[0] ||
          document.getElementsByTagName("BODY")[0]
        ).appendChild(s);
      })();
    </script>
    <noscript
      >Please enable JavaScript to view the
      <a href="http://disqus.com/?ref_noscript"
        >comments powered by Disqus.</a
      ></noscript
    >
    <a href="http://disqus.com" class="dsq-brlink"
      >comments powered by <span class="logo-disqus">Disqus</span></a
    >
  </body>
</html>
