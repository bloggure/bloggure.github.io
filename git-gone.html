<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
  <!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <title>Git-gone &#8211; Bloggure</title>
    <meta
      name="description"
      content="Multi author blog about programming, computing and geek stuff"
    />
    <meta name="keywords" content="cli, tools, git" />

    <!-- Open Graph -->
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Git-gone" />
    <meta
      property="og:description"
      content="Multi author blog about programming, computing and geek stuff"
    />
    <meta property="og:url" content="http://www.bloggure.info/git-gone" />
    <meta property="og:site_name" content="Bloggure" />

    <link rel="canonical" href="http://www.bloggure.info/git-gone" />
    <link
      href="http://www.bloggure.info/feed.xml"
      type="application/atom+xml"
      rel="alternate"
      title="Bloggure Feed"
    />

    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- For all browsers -->
    <link
      rel="stylesheet"
      href="http://www.bloggure.info/assets/css/main.css"
    />
    <!-- Webfonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic"
      rel="stylesheet"
      type="text/css"
    />

    <meta http-equiv="cleartype" content="on" />

    <!-- Load Modernizr -->
    <script src="http://www.bloggure.info/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

    <!-- Icons -->
    <!-- 16x16 -->
    <link rel="shortcut icon" href="http://www.bloggure.info/favicon.ico" />
    <!-- 32x32 -->
    <link rel="shortcut icon" href="http://www.bloggure.info/favicon.png" />
    <!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
    <link
      rel="apple-touch-icon-precomposed"
      href="http://www.bloggure.info/images/apple-touch-icon-precomposed.png"
    />
    <!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
    <link
      rel="apple-touch-icon-precomposed"
      sizes="72x72"
      href="http://www.bloggure.info/images/apple-touch-icon-72x72-precomposed.png"
    />
    <!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
    <link
      rel="apple-touch-icon-precomposed"
      sizes="114x114"
      href="http://www.bloggure.info/images/apple-touch-icon-114x114-precomposed.png"
    />
    <!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
    <link
      rel="apple-touch-icon-precomposed"
      sizes="144x144"
      href="http://www.bloggure.info/images/apple-touch-icon-144x144-precomposed.png"
    />
  </head>

  <body id="post">
    <!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

    <div class="entry-header">
      <header class="header-title">
        <div class="header-title-wrap">
          <h1 class="entry-title" itemprop="name">
            <a href="http://www.bloggure.info/">Bloggure</a>
          </h1>
        </div>
        <!-- /.header-title-wrap -->
      </header>
    </div>

    <div id="main" role="main">
      <article class="hentry">
        <div class="entry-content">
          <header>
            <div class="entry-meta">
              <span class="entry-date date published updated"
                ><time
                  datetime="2020-12-31T00:00:00+01:00"
                  itemprop="datePublished"
                  ><a href="http://www.bloggure.info/git-gone"
                    >December 31, 2020</a
                  ></time
                ></span
              ><span
                class="author vcard"
                itemprop="author"
                itemscope
                itemtype="http://schema.org/Person"
                ><span itemprop="name" class="fn"
                  ><a
                    href="http://www.bloggure.info/cgatay"
                    title="About cgatay"
                    itemprop="url"
                    >cgatay</a
                  ></span
                ></span
              >&nbsp; &bull; &nbsp;<span class="entry-comments"
                ><a href="http://www.bloggure.info/git-gone#disqus_thread"
                  >Comment</a
                ></span
              >
            </div>
            <!-- /.entry-meta -->

            <h1 class="entry-title" itemprop="name">
              <a
                href="http://www.bloggure.info/git-gone"
                rel="bookmark"
                title="Git-gone"
                itemprop="url"
                >Git-gone</a
              >
            </h1>
          </header>
          <h1 id="git-daily-usage">Git daily usage</h1>

          <p>
            If you‚Äôre like most developers nowadays you make an extensive usage
            of <code>git</code> across a large number of repositories.
          </p>

          <p>
            The now-classic branching model that consists in using a branch for
            every fix / feature / experiment before creating a merge request is
            perfect for collaborating efficiently. However it comes with one
            downside, local branches can quickly become messy and removing stale
            branches is not that easy
          </p>

          <h2 id="removing-remote-branches">Removing remote branches</h2>

          <p>
            <code>git</code> is a really well designed tool and removing remote
            references from your local repository is easily done by
          </p>

          <figure class="highlight">
            <pre><code class="language-shell" data-lang="shell"><span></span>git remote prune origin</code></pre>
          </figure>

          <p>
            This will remove local references to non existing branches, however
            it is not useful to remember this command, we can configure
            <code>git</code> so that it prunes automatically on fetching :
          </p>

          <figure class="highlight">
            <pre><code class="language-shell" data-lang="shell"><span></span>git config --global fetch.prune <span class="nb">true</span></code></pre>
          </figure>

          <h2 id="removing-local-branches">Removing local branches</h2>

          <p>
            This is where things can be quite messy, as local branches might
            have been merged, rebased, or squashed, and ‚Äúclassic‚Äù commands
            allowing to detected merged branches are not always working as they
            ought.
          </p>

          <p>
            If you search how to clean up local branches, you might find a lot
            of commands involving <code>git branch --merged</code> with
            <code>grep</code> and <code>xargs</code> all the way.
          </p>

          <p>
            I found out a little neat tool to do so, called
            <a href="https://github.com/lunaryorn/git-gone"
              ><code>git-gone</code> (github/lunaryorn/git-gone)</a
            >, written in Rust üß°
          </p>

          <h3 id="install-it">Install it</h3>

          <p>
            As all rust project, it is packaged and easy to install using cargo
          </p>

          <figure class="highlight">
            <pre><code class="language-swift" data-lang="swift"><span></span><span class="n">cargo</span> <span class="n">install</span> <span class="n">git</span><span class="o">-</span><span class="n">gone</span></code></pre>
          </figure>

          <h3 id="list-branches-to-prune">List branches to prune</h3>

          <p>
            Before doing anything silly, we can list the branches that are
            candidate to removal (the <code>-f</code> flag forces fetching
            remote)
          </p>

          <figure class="highlight">
            <pre><code class="language-swift" data-lang="swift"><span></span><span class="err">$</span> <span class="n">git</span> <span class="n">gone</span> <span class="o">-</span><span class="n">f</span> <span class="n">list</span>
<span class="n">feature</span><span class="o">/</span><span class="n">asciidoc</span>
<span class="n">fix</span><span class="o">/</span><span class="n">imageCompress</span></code></pre>
          </figure>

          <h3 id="pruneem-all">Prune‚Äôem all</h3>

          <p>
            And finally, you can remove them (the <code>-f</code> flag is still
            here to sync with remote)
          </p>

          <figure class="highlight">
            <pre><code class="language-swift" data-lang="swift"><span></span><span class="err">$</span> <span class="n">git</span> <span class="n">gone</span> <span class="o">-</span><span class="n">f</span> <span class="n">prune</span>
<span class="n">Deleted</span> <span class="n">feature</span><span class="o">/</span><span class="n">asciidoc</span> <span class="p">(</span><span class="n">restore</span> <span class="n">with</span> <span class="p">`</span><span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">feature</span><span class="o">/</span><span class="n">asciidoc</span> <span class="mi">8</span><span class="n">f007a</span><span class="p">`)</span>
<span class="n">Deleted</span> <span class="n">fix</span><span class="o">/</span><span class="n">imageCompress</span> <span class="p">(</span><span class="n">restore</span> <span class="n">with</span> <span class="p">`</span><span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="n">fix</span><span class="o">/</span><span class="n">imageCompress</span> <span class="n">af523b</span><span class="p">`)</span></code></pre>
          </figure>

          <p>
            <code>git-gone</code> is event clever enough to give you the command
            to restore a branch if change your mind (as long as you did not
            <code>git gc</code> the revision is still available locally, so you
            can restore it)
          </p>

          <footer class="entry-meta">
            <span class="entry-tags"
              ><a
                href="http://www.bloggure.info/tags/#cli"
                title="Pages tagged cli"
                class="tag"
                ><span class="term">cli</span></a
              ><a
                href="http://www.bloggure.info/tags/#tools"
                title="Pages tagged tools"
                class="tag"
                ><span class="term">tools</span></a
              ><a
                href="http://www.bloggure.info/tags/#git"
                title="Pages tagged git"
                class="tag"
                ><span class="term">git</span></a
              ></span
            >

            <div class="social-share">
              <ul class="socialcount socialcount-small inline-list">
                <li class="facebook">
                  <a
                    href="https://www.facebook.com/sharer/sharer.php?u=http://www.bloggure.info/git-gone"
                    title="Share on Facebook"
                    ><span class="count"
                      ><i class="fa fa-facebook-square"></i> Like</span
                    ></a
                  >
                </li>
                <li class="twitter">
                  <a
                    href="https://twitter.com/intent/tweet?text=http://www.bloggure.info/git-gone"
                    title="Share on Twitter"
                    ><span class="count"
                      ><i class="fa fa-twitter-square"></i> Tweet</span
                    ></a
                  >
                </li>
              </ul>
            </div>
            <!-- /.social-share -->
          </footer>
        </div>
        <!-- /.entry-content -->
        <section id="disqus_thread"></section>
        <!-- /#disqus_thread -->
        <div class="read-more">
          <div class="read-more-header">
            <a
              href="http://www.bloggure.info/mac-checklist"
              class="read-more-btn"
              >Read More</a
            >
          </div>
          <!-- /.read-more-header -->
          <div class="read-more-content">
            <h3>
              <a
                href="http://www.bloggure.info/mac-checklist"
                title="macOS tools checklist"
                >macOS tools checklist</a
              >
            </h3>
            <p>
              Welcome to the mac worldWether you‚Äôre new to macOS or an user
              coming from different machines, the tools we tend to use is very
              important ...&hellip;
              <a href="http://www.bloggure.info/mac-checklist"
                >Continue reading</a
              >
            </p>
          </div>
          <!-- /.read-more-content -->

          <div class="read-more-list">
            <div class="list-item">
              <h4>
                <a
                  href="http://www.bloggure.info/SwiftUI-UIKit_Interop"
                  title="SwiftUI UIKit Interop"
                  >SwiftUI UIKit Interop</a
                >
              </h4>
              <span>Published on December 03, 2020</span>
            </div>
            <!-- /.list-item -->

            <div class="list-item">
              <h4>
                <a
                  href="http://www.bloggure.info/XCodeUnitTestInheritance"
                  title="XCode unit test and inheritance"
                  >XCode unit test and inheritance</a
                >
              </h4>
              <span>Published on December 02, 2020</span>
            </div>
            <!-- /.list-item -->
          </div>
          <!-- /.read-more-list -->
        </div>
        <!-- /.read-more -->
      </article>
    </div>
    <!-- /#main -->

    <div class="footer-wrapper">
      <footer role="contentinfo">
        <span
          >&copy; 2020 . Powered by
          <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using a theme
          based on
          <a
            href="https://mademistakes.com/work/hpstr-jekyll-theme/"
            rel="nofollow"
            >HPSTR</a
          >.</span
        >
      </footer>
    </div>
    <!-- /.footer-wrapper -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
      window.jQuery ||
        document.write(
          '<script src="http://www.bloggure.info/assets/js/vendor/jquery-1.9.1.min.js"><\/script>'
        );
    </script>
    <script src="http://www.bloggure.info/assets/js/scripts.min.js"></script>

    <!-- Asynchronous Google Analytics snippet -->
    <script>
      (function (i, s, o, g, r, a, m) {
        i["GoogleAnalyticsObject"] = r;
        (i[r] =
          i[r] ||
          function () {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(
        window,
        document,
        "script",
        "//www.google-analytics.com/analytics.js",
        "ga"
      );

      ga("create", "UA-11718843-3", "auto");
      ga("require", "linkid", "linkid.js");
      ga("send", "pageview");
    </script>

    <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = "thereisnoplacelike1"; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
        var dsq = document.createElement("script");
        dsq.type = "text/javascript";
        dsq.async = true;
        dsq.src = "//" + disqus_shortname + ".disqus.com/embed.js";
        (
          document.getElementsByTagName("head")[0] ||
          document.getElementsByTagName("body")[0]
        ).appendChild(dsq);
      })();

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
        var s = document.createElement("script");
        s.async = true;
        s.type = "text/javascript";
        s.src = "//" + disqus_shortname + ".disqus.com/count.js";
        (
          document.getElementsByTagName("HEAD")[0] ||
          document.getElementsByTagName("BODY")[0]
        ).appendChild(s);
      })();
    </script>
    <noscript
      >Please enable JavaScript to view the
      <a href="http://disqus.com/?ref_noscript"
        >comments powered by Disqus.</a
      ></noscript
    >
    <a href="http://disqus.com" class="dsq-brlink"
      >comments powered by <span class="logo-disqus">Disqus</span></a
    >
  </body>
</html>
