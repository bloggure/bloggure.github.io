<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
  <!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <title>Bloggure</title>
    <meta
      name="description"
      content="Multi author blog about programming, computing and geek stuff"
    />

    <!-- Open Graph -->
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Bloggure" />
    <meta
      property="og:description"
      content="Multi author blog about programming, computing and geek stuff"
    />
    <meta property="og:url" content="http://www.bloggure.info/" />
    <meta property="og:site_name" content="Bloggure" />

    <link rel="canonical" href="http://www.bloggure.info/" />
    <link
      href="http://www.bloggure.info/feed.xml"
      type="application/atom+xml"
      rel="alternate"
      title="Bloggure Feed"
    />

    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- For all browsers -->
    <link
      rel="stylesheet"
      href="http://www.bloggure.info/assets/css/main.css"
    />
    <!-- Webfonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic"
      rel="stylesheet"
      type="text/css"
    />

    <meta http-equiv="cleartype" content="on" />

    <!-- Load Modernizr -->
    <script src="http://www.bloggure.info/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

    <!-- Icons -->
    <!-- 16x16 -->
    <link rel="shortcut icon" href="http://www.bloggure.info/favicon.ico" />
    <!-- 32x32 -->
    <link rel="shortcut icon" href="http://www.bloggure.info/favicon.png" />
    <!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
    <link
      rel="apple-touch-icon-precomposed"
      href="http://www.bloggure.info/images/apple-touch-icon-precomposed.png"
    />
    <!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
    <link
      rel="apple-touch-icon-precomposed"
      sizes="72x72"
      href="http://www.bloggure.info/images/apple-touch-icon-72x72-precomposed.png"
    />
    <!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
    <link
      rel="apple-touch-icon-precomposed"
      sizes="114x114"
      href="http://www.bloggure.info/images/apple-touch-icon-114x114-precomposed.png"
    />
    <!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
    <link
      rel="apple-touch-icon-precomposed"
      sizes="144x144"
      href="http://www.bloggure.info/images/apple-touch-icon-144x144-precomposed.png"
    />
  </head>

  <body id="post-index">
    <!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

    <div class="entry-header">
      <div class="header-title">
        <div class="header-title-wrap">
          <h1>Bloggure</h1>
          <h2></h2>
        </div>
        <!-- /.header-title-wrap -->
      </div>
      <!-- /.header-title -->
    </div>
    <!-- /.entry-header -->

    <div id="main" role="main">
      <article
        class="hentry"
        itemprop="blogPost"
        itemscope
        itemtype="http://schema.org/BlogPosting"
      >
        <header>
          <div class="entry-meta">
            <span class="entry-date date published updated"
              ><time
                datetime="2020-12-06T00:00:00+01:00"
                itemprop="datePublished"
                ><a href="http://www.bloggure.info/mac-checklist"
                  >December 06, 2020</a
                ></time
              ></span
            ><span
              class="author vcard"
              itemprop="author"
              itemscope
              itemtype="http://schema.org/Person"
              ><span itemprop="name" class="fn"
                ><a
                  href="http://www.bloggure.info/cgatay"
                  title="About cgatay"
                  itemprop="url"
                  >cgatay</a
                ></span
              ></span
            >&nbsp; &bull; &nbsp;<span class="entry-comments"
              ><a href="http://www.bloggure.info/mac-checklist#disqus_thread"
                >Comment</a
              ></span
            >
          </div>
          <!-- /.entry-meta -->

          <h1 class="entry-title" itemprop="name">
            <a
              href="http://www.bloggure.info/mac-checklist"
              rel="bookmark"
              title="macOS tools checklist"
              itemprop="url"
              >macOS tools checklist</a
            >
          </h1>
        </header>
        <div class="entry-content" itemprop="description">
          <h1 id="welcome-to-the-mac-world">Welcome to the mac world</h1>

          <p>
            Wether you’re new to macOS or an user coming from different
            machines, the tools we tend to use is very important to be
            productive.
          </p>

          <p>
            Here you’ll find my list and what I install on a fresh machine to
            get started.
          </p>

          <h2 id="system-tools">System tools</h2>

          <p>
            First and foremost, I start with
            <a href="https://brew.sh"><code>brew</code></a> to handle all my
            packages, but instead of doing so manually, I use my
            <a href="https://github.com/CedricGatay/dotfiles.git"
              ><code>dotfiles</code></a
            >
            and my “magic” install script that does all the heavy lifting for
            me.
          </p>

          <h2 id="keyboard-tools">Keyboard tools</h2>

          <p>
            I use a TypeMatrix with a Colemak layout and also the internal
            keyboard of my laptop with its default layout. Colemak layout is
            available on a fresh macOS install but it is far from perfect as
            there are a lot of missing dead keys (to type accented letters
            mainly), so I start by installing the layout provided on this page:
            <a href="https://colemak.com/Mac">Colemak mac</a>
          </p>

          <p>
            To easily switch between the two and get almost the same feeling, I
            use
            <a href="http://karabiner-elements.pqrs.org/">Karabiner Elements</a
            >.
          </p>

          <h2 id="everyday-tools">Everyday tools</h2>

          <ul>
            <li>
              <a href="https://sdkman.io">sdkman</a>: to manage installation of
              various sdk (mainly Java based)
            </li>
            <li>
              <a href="https://iterm2.com">iTerm</a>: nice terminal app with
              profiles
            </li>
            <li>
              <a href="https://github.com/tmux/tmux/wiki">tmux</a>: multi
              terminal in one window, switching terminal with a keystroke
            </li>
            <li><a href="https://www.zsh.org">zsh</a>: Z-Shell</li>
            <li>
              <a href="https://starship.rs">starship</a>: fast shell prompt
            </li>
            <li>
              <a href="https://github.com/BurntSushi/ripgrep">ripgrep</a>:
              faster <code>grep</code>
            </li>
            <li>
              <a href="https://github.com/sharkdp/bat">bat</a>: nice
              <code>cat</code> alternative (with paging / highlighting)
            </li>
            <li>
              <a href="https://github.com/ogham/exa">exa</a>: replacement for
              <code>ls</code>
            </li>
            <li>
              <a href="https://www.alfredapp.com">Alfred</a>: Spotlight with
              more features, this is my main app launcher / switcher
            </li>
            <li>
              <a href="https://go.setapp.com/invite/cgatay">SetApp</a>: App
              subscription service, use many tools from this (BetterTouchTool,
              iStat, BarTender…)
            </li>
          </ul>
        </div>
        <!-- /.entry-content -->
      </article>
      <!-- /.hentry -->

      <article
        class="hentry"
        itemprop="blogPost"
        itemscope
        itemtype="http://schema.org/BlogPosting"
      >
        <header>
          <div class="entry-meta">
            <span class="entry-date date published updated"
              ><time
                datetime="2020-12-03T00:00:00+01:00"
                itemprop="datePublished"
                ><a href="http://www.bloggure.info/SwiftUI-UIKit_Interop"
                  >December 03, 2020</a
                ></time
              ></span
            ><span
              class="author vcard"
              itemprop="author"
              itemscope
              itemtype="http://schema.org/Person"
              ><span itemprop="name" class="fn"
                ><a
                  href="http://www.bloggure.info/cgatay"
                  title="About cgatay"
                  itemprop="url"
                  >cgatay</a
                ></span
              ></span
            >&nbsp; &bull; &nbsp;<span class="entry-comments"
              ><a
                href="http://www.bloggure.info/SwiftUI-UIKit_Interop#disqus_thread"
                >Comment</a
              ></span
            >
          </div>
          <!-- /.entry-meta -->

          <h1 class="entry-title" itemprop="name">
            <a
              href="http://www.bloggure.info/SwiftUI-UIKit_Interop"
              rel="bookmark"
              title="SwiftUI UIKit Interop"
              itemprop="url"
              >SwiftUI UIKit Interop</a
            >
          </h1>
        </header>
        <div class="entry-content" itemprop="description">
          <p>
            Now that iOS13 is available for more than year, we can start to set
            it as a lower bound for our deployments.
          </p>

          <p>
            This allows us to play with all sugar that Apple put in it, one of
            the biggest thing is the arrival of SwiftUI to supercede UIKit
            (write cross platform UIs and so on).
          </p>

          <h2 id="bridging-the-two-worlds">Bridging the two worlds</h2>

          <h3 id="using-swiftui-from-uikit">Using SwiftUI from UIKit</h3>

          <p>
            The first thing we might try to do, is embedding a SwiftUI View
            inside our <code>UIViewController</code> based application. To do
            so, Apple gives us <code>UIHostingViewController</code> which is a
            simple bridging controller, straightforward to use.
          </p>

          <figure class="highlight">
            <pre><code class="language-swift" data-lang="swift"><span></span><span class="kd">struct</span> <span class="nc">MyNewView</span><span class="p">:</span> <span class="n">View</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">view</span><span class="p">:</span> <span class="n">some</span> <span class="n">View</span> <span class="p">{</span>
        <span class="n">Text</span><span class="p">(</span><span class="s">&quot;I&#39;m in SwiftUI&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">MyNewViewViewController</span><span class="p">:</span> <span class="n">UIHostingViewController</span> <span class="p">{</span>
    <span class="kd">init</span><span class="p">(){</span>
        <span class="kc">super</span><span class="p">.</span><span class="kd">init</span><span class="p">(</span><span class="n">rootView</span><span class="p">:</span> <span class="n">MyNewView</span><span class="p">())</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
          </figure>

          <h3 id="uiviewcontroller-in-swiftui">UIViewController in SwiftUI</h3>

          <p>
            However, at times we still need to reuse our good old
            <code>UIViewController</code>, either because we can not afford a
            full SwiftUI rewrite, so we want to keep old code and migrate pieces
            by pieces or because we are using something not yet adapted to
            SwiftUI.
          </p>

          <p>In my case it was using the camera to scan a QRCode.</p>

          <h4 id="non-elegant-solution">Non elegant solution</h4>

          <p>
            I faced a few issue with examples I found out, most of them are
            adding an extension to the <code>UIViewController</code> that makes
            it conform to <code>UIViewControllerRepresentable</code>.
          </p>

          <figure class="highlight">
            <pre><code class="language-swift" data-lang="swift"><span></span><span class="kd">class</span> <span class="nc">MyViewController</span><span class="p">:</span> <span class="bp">UIViewController</span><span class="p">{</span>
    <span class="kd">var</span> <span class="nv">cancellable</span><span class="p">:</span> <span class="n">Cancellable</span><span class="p">?</span>
    <span class="c1">// classic stuff</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="nc">MyViewController</span><span class="p">:</span> <span class="n">UIViewControllerRepresentable</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">typealias</span> <span class="n">UIViewControllerType</span> <span class="p">=</span> <span class="n">MyViewController</span>

    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">makeUIViewController</span><span class="p">(</span><span class="n">context</span> <span class="kc">_</span><span class="p">:</span> <span class="n">UIViewControllerRepresentableContext</span><span class="p">&lt;</span><span class="n">MyViewController</span><span class="p">&gt;)</span> <span class="p">-&gt;</span> <span class="n">UIViewControllerType</span> <span class="p">{</span>
        <span class="kc">self</span> <span class="c1">// don&#39;t .init() please, class instance is already available</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">updateUIViewController</span><span class="p">(</span><span class="kc">_</span><span class="p">:</span> <span class="n">UIViewControllerType</span><span class="p">,</span> <span class="n">context</span> <span class="kc">_</span><span class="p">:</span> <span class="n">UIViewControllerRepresentableContext</span><span class="p">&lt;</span><span class="n">MyViewController</span><span class="p">&gt;)</span> <span class="p">{}</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">dismantleUIViewController</span><span class="p">(</span><span class="kc">_</span> <span class="n">uiViewController</span><span class="p">:</span> <span class="n">UIViewControllerType</span><span class="p">,</span> <span class="n">coordinator</span> <span class="kc">_</span><span class="p">:</span> <span class="n">Coordinator</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">uiViewController</span><span class="p">.</span><span class="n">cancellable</span><span class="p">?.</span><span class="n">cancel</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">MyView</span><span class="p">:</span> <span class="n">View</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="n">View</span> <span class="p">{</span>
    <span class="n">MyViewController</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
          </figure>

          <p>
            I find this not easy to read, as we’re doing weird thing by
            returning <code>self</code> from a function named
            <code>makeUIViewController</code>. Some example are telling to
            return <code>MyViewController()</code> instead of <code>self</code>.
            Please don’t do this otherwise you’re creating the
            <code>UIViewController</code> twice for each call !
          </p>

          <p>
            I also had a leak when using <code>Combine</code> (more to come
            about this great framework), my <code>Cancellable</code>s were never
            freed, leading in a memory cycle that kept the
            <code>UIViewController</code> living even though it was no longer
            presented.
          </p>

          <p>
            It is important to do proper house keeping in the
            <code>dismantleUIViewController</code> method if you don’t want to
            use too much memory and slow down your app.
          </p>

          <h4 id="nice-looking-way-of-doing">Nice looking way of doing</h4>

          <p>
            You will find a working example below, basically we need to
            implement a <code>UIViewControllerRepresentable</code> struct to
            represent be the container for our <code>UIViewController</code> in
            the SwiftUI world.
          </p>

          <figure class="highlight">
            <pre><code class="language-swift" data-lang="swift"><span></span><span class="kd">class</span> <span class="nc">MyViewController</span><span class="p">:</span> <span class="bp">UIViewController</span><span class="p">{</span>
    <span class="kd">var</span> <span class="nv">cancellable</span><span class="p">:</span> <span class="n">Cancellable</span><span class="p">?</span>
    <span class="c1">// classic stuff</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">MyGreatView</span><span class="p">:</span> <span class="n">UIViewControllerRepresentable</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">typealias</span> <span class="n">UIViewControllerType</span> <span class="p">=</span> <span class="n">MyViewController</span>

    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">makeUIViewController</span><span class="p">(</span><span class="n">context</span> <span class="kc">_</span><span class="p">:</span> <span class="n">UIViewControllerRepresentableContext</span><span class="p">&lt;</span><span class="n">MyGreatView</span><span class="p">&gt;)</span> <span class="p">-&gt;</span> <span class="n">UIViewControllerType</span> <span class="p">{</span>
        <span class="n">MyViewController</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">updateUIViewController</span><span class="p">(</span><span class="kc">_</span><span class="p">:</span> <span class="n">UIViewControllerType</span><span class="p">,</span> <span class="n">context</span> <span class="kc">_</span><span class="p">:</span> <span class="n">UIViewControllerRepresentableContext</span><span class="p">&lt;</span><span class="n">MyGreatView</span><span class="p">&gt;)</span> <span class="p">{}</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">dismantleUIViewController</span><span class="p">(</span><span class="kc">_</span> <span class="n">uiViewController</span><span class="p">:</span> <span class="n">UIViewControllerType</span><span class="p">,</span> <span class="n">coordinator</span> <span class="kc">_</span><span class="p">:</span> <span class="n">Coordinator</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">uiViewController</span><span class="p">.</span><span class="n">cancellable</span><span class="p">?.</span><span class="n">cancel</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">struct</span> <span class="nc">MyView</span><span class="p">:</span> <span class="n">View</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="n">View</span> <span class="p">{</span>
    <span class="n">MyGreatView</span><span class="p">()</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre>
          </figure>
        </div>
        <!-- /.entry-content -->
      </article>
      <!-- /.hentry -->

      <article
        class="hentry"
        itemprop="blogPost"
        itemscope
        itemtype="http://schema.org/BlogPosting"
      >
        <header>
          <div class="entry-meta">
            <span class="entry-date date published updated"
              ><time
                datetime="2020-12-02T00:00:00+01:00"
                itemprop="datePublished"
                ><a href="http://www.bloggure.info/XCodeUnitTestInheritance"
                  >December 02, 2020</a
                ></time
              ></span
            ><span
              class="author vcard"
              itemprop="author"
              itemscope
              itemtype="http://schema.org/Person"
              ><span itemprop="name" class="fn"
                ><a
                  href="http://www.bloggure.info/cgatay"
                  title="About cgatay"
                  itemprop="url"
                  >cgatay</a
                ></span
              ></span
            >&nbsp; &bull; &nbsp;<span class="entry-comments"
              ><a
                href="http://www.bloggure.info/XCodeUnitTestInheritance#disqus_thread"
                >Comment</a
              ></span
            >
          </div>
          <!-- /.entry-meta -->

          <h1 class="entry-title" itemprop="name">
            <a
              href="http://www.bloggure.info/XCodeUnitTestInheritance"
              rel="bookmark"
              title="XCode unit test and inheritance"
              itemprop="url"
              >XCode unit test and inheritance</a
            >
          </h1>
        </header>
        <div class="entry-content" itemprop="description">
          <p>
            As I was working on an iOS project, I added unit tests to ensure
            things are not behaving badly (and will not).
          </p>

          <p>
            During the process, a common pattern showed up and a few fields were
            required, I came up with the idea to basically create a
            <code>BaseTest</code> for my tests, so that everything is unified.
          </p>

          <h2 id="base-idea">Base idea</h2>

          <p>I came up with something like the following for my tests</p>

          <figure class="highlight">
            <pre><code class="language-swift" data-lang="swift"><span></span><span class="kd">class</span> <span class="nc">BaseTest</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">Action</span><span class="p">&gt;:</span> <span class="n">XCTestCase</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">subject</span><span class="p">:</span> <span class="n">T</span><span class="p">!</span>
    <span class="kd">var</span> <span class="nv">actions</span><span class="p">:</span> <span class="p">[</span><span class="n">Action</span><span class="p">]</span><span class="o">!</span>

    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">setUp</span><span class="p">(){</span>
        <span class="n">subject</span> <span class="p">=</span> <span class="n">T</span><span class="p">()</span>
        <span class="n">actions</span> <span class="p">=</span> <span class="p">[]</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">LoginTest</span><span class="p">:</span> <span class="n">BaseTest</span><span class="p">&lt;</span><span class="n">LoginMiddleware</span><span class="p">,</span> <span class="n">LoginAction</span><span class="p">&gt;</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">test_loginIsWorking</span><span class="p">(){</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
          </figure>

          <p>
            It worked very well within XCode, I could run the tests by hitting
            the 🔹 in the gutter.
          </p>

          <h2 id="bad-things-happen">Bad things happen</h2>

          <p>
            The thing that I discovered later (thanks to the CI feedback), is
            that XCode was not properly discovering my tests as it should. At
            first I blamed the fact that my new tests were not at the top level
            of my sources folder (and the other ones were), but it was easy to
            check that this was not the problem at all.
          </p>

          <p>
            Then, I blamed <code>fastlane</code> and thought that I’ve missed
            something in my test target configuration or something, but in fact,
            the problem was similar when using classical
            <code>CMD + U</code> key combo.
          </p>

          <p>XCode was simply not discovering my test.</p>

          <h2 id="workaround">Workaround</h2>
          <p>
            Inheritance is often misused, in this case, I think it is relevant,
            but I applied classical way of working around this. I changed my
            <code>BaseTest</code> to a <code>BaseHelper</code> instead, to which
            the test delegates the calls.
          </p>

          <p>
            With this, the test class properly inherits
            <code>XCTestCase</code> and is discovered as expected (even in
            subfolders).
          </p>

          <figure class="highlight">
            <pre><code class="language-swift" data-lang="swift"><span></span><span class="kd">class</span> <span class="nc">BaseHelper</span><span class="p">&lt;</span><span class="n">T</span><span class="p">,</span> <span class="n">Action</span><span class="p">&gt;{</span>
    <span class="kd">var</span> <span class="nv">subject</span><span class="p">:</span> <span class="n">T</span><span class="p">!</span>
    <span class="kd">var</span> <span class="nv">actions</span><span class="p">:</span> <span class="p">[</span><span class="n">Action</span><span class="p">]</span><span class="o">!</span>

    <span class="kd">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">subject</span> <span class="p">=</span> <span class="n">T</span><span class="p">()</span>
        <span class="n">actions</span> <span class="p">=</span> <span class="p">[]</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">class</span> <span class="nc">LoginTest</span><span class="p">:</span> <span class="n">XCTestCase</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">helper</span><span class="p">:</span> <span class="n">BaseHelper</span><span class="p">&lt;</span><span class="n">LoginMiddleware</span><span class="p">,</span> <span class="n">LoginAction</span><span class="p">&gt;</span><span class="o">!</span>

    <span class="kr">override</span> <span class="kd">func</span> <span class="nf">setUp</span><span class="p">(){</span>
        <span class="n">helper</span> <span class="p">=</span> <span class="p">.</span><span class="kd">init</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="kd">func</span> <span class="nf">test_loginIsWorking</span><span class="p">(){</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre>
          </figure>

          <p>
            The nice thing in this solution is that the <code>setUp</code> call
            is no longer magical !
          </p>
        </div>
        <!-- /.entry-content -->
      </article>
      <!-- /.hentry -->

      <article
        class="hentry"
        itemprop="blogPost"
        itemscope
        itemtype="http://schema.org/BlogPosting"
      >
        <header>
          <div class="entry-meta">
            <span class="entry-date date published updated"
              ><time
                datetime="2020-12-01T00:00:00+01:00"
                itemprop="datePublished"
                ><a href="http://www.bloggure.info/Revival"
                  >December 01, 2020</a
                ></time
              ></span
            ><span
              class="author vcard"
              itemprop="author"
              itemscope
              itemtype="http://schema.org/Person"
              ><span itemprop="name" class="fn"
                ><a
                  href="http://www.bloggure.info/cgatay"
                  title="About cgatay"
                  itemprop="url"
                  >cgatay</a
                ></span
              ></span
            >&nbsp; &bull; &nbsp;<span class="entry-comments"
              ><a href="http://www.bloggure.info/Revival#disqus_thread"
                >Comment</a
              ></span
            >
          </div>
          <!-- /.entry-meta -->

          <h1 class="entry-title" itemprop="name">
            <a
              href="http://www.bloggure.info/Revival"
              rel="bookmark"
              title="Bloggure revival"
              itemprop="url"
              >Bloggure revival</a
            >
          </h1>
        </header>
        <div class="entry-content" itemprop="description">
          <h1 id="its-been-a-long-time">It’s been a long time</h1>

          <p>It’s been a very long time since last post (5 years…).</p>

          <p>
            I am convinced that blogging is useful, at least for my present
            self, and for my future self that tends to lose track of important
            things.
          </p>

          <h2 id="what-will-this-be-about-">What will this be about ?</h2>

          <p>
            In the <em>past</em> I blogged a lot about Java / Maven and so on,
            my days have evolved to another languages, so I guess there will be
            less JVM things (but may be a few Kotlin) and more Swift / Rust on
            the other end.
          </p>

          <h2 id="technical-stack">Technical stack</h2>

          <p>
            In a blog reboot, we (I mean dev) like to follow the latest trend
            and migrate our blog system to latest hype stack. I will avoid this
            and focus on writing instead, so the site stays in its 15’ shape:
          </p>

          <ul>
            <li><a href="http://jekyllrb.com/">jekyll</a></li>
            <li><a href="https://pages.github.com">github-pages</a></li>
            <li>
              markdown (I think <code>jenkins-asciidoc</code> is around the
              corner though)
            </li>
            <li>
              <a href="https://actions.github.com">github actions</a> for
              building
            </li>
          </ul>

          <p>
            The sole new thing is that I’m trying to write using
            <a href="https://gitpod.io">gitpod.io</a> to get a distraction free
            environment.
          </p>
        </div>
        <!-- /.entry-content -->
      </article>
      <!-- /.hentry -->

      <article
        class="hentry"
        itemprop="blogPost"
        itemscope
        itemtype="http://schema.org/BlogPosting"
      >
        <header>
          <div class="entry-meta">
            <span class="entry-date date published updated"
              ><time
                datetime="2015-11-16T00:00:00+01:00"
                itemprop="datePublished"
                ><a
                  href="http://www.bloggure.info/redsocks-avoid-docker-proxy-headaches"
                  >November 16, 2015</a
                ></time
              ></span
            ><span
              class="author vcard"
              itemprop="author"
              itemscope
              itemtype="http://schema.org/Person"
              ><span itemprop="name" class="fn"
                ><a
                  href="http://www.bloggure.info/cgatay"
                  title="About cgatay"
                  itemprop="url"
                  >cgatay</a
                ></span
              ></span
            >&nbsp; &bull; &nbsp;<span class="entry-comments"
              ><a
                href="http://www.bloggure.info/redsocks-avoid-docker-proxy-headaches#disqus_thread"
                >Comment</a
              ></span
            >
          </div>
          <!-- /.entry-meta -->

          <h1 class="entry-title" itemprop="name">
            <a
              href="http://www.bloggure.info/redsocks-avoid-docker-proxy-headaches"
              rel="bookmark"
              title="Avoid Proxy Headaches in Docker with redsocks"
              itemprop="url"
              >Avoid Proxy Headaches in Docker with redsocks</a
            >
          </h1>
        </header>
        <div class="entry-content" itemprop="description">
          <h1 id="proxying-with-docker">Proxying with Docker</h1>

          <p>
            When using docker under a corporate proxy, it can be cumbersome to
            have a working networking in all containers. You often end up being
            blocked by specific network access which does not seem to be
            properly forwarded to the proper proxy. For example when using
            <code>apt</code>.
          </p>

          <h2 id="classic-way-of-doing">Classic way of doing</h2>

          <p>
            There is a
            <a
              href="https://docs.docker.com/engine/articles/systemd/#http-proxy"
              >documented way</a
            >
            of using a proxy, by adding command-line switches to your docker
            deamon. However, it does not seem to work everytime and could
            require exporting additional settings to your in-container
            applications (in my experience though).
          </p>

          <h2 id="why-not-using-docker">Why not using docker</h2>

          <p>
            <a href="https://github.com/ncarlier/">Nicolas</a> pointed me an
            image he created to help with the setup of a corporate proxy. It
            uses <a href="http://darkk.net.ru/redsocks/">redsocks</a> under the
            hood that listen to the docker socket and automatically add the glue
            to do the forwarding through the proxy.
          </p>

          <p>
            Easy proxying in docker is just one command away ! (fill in the
            blank of your proxy ip and port)
          </p>

          <pre><code>docker run \
       --restart=always \
       --privileged=true \
       --net=host \
       -d ncarlier/redsocks \
       $PROXY_IP $PROXY_PORT
</code></pre>
        </div>
        <!-- /.entry-content -->
      </article>
      <!-- /.hentry -->

      <div class="pagination">
        Previous

        <ul class="inline-list">
          <li>
            <span class="current-page">1</span>
          </li>

          <li>
            <a href="http://www.bloggure.info/page2">2</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page3">3</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page4">4</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page5">5</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page6">6</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page7">7</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page8">8</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page9">9</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page10">10</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page11">11</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page12">12</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page13">13</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page14">14</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page15">15</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page16">16</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page17">17</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page18">18</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page19">19</a>
          </li>

          <li>
            <a href="http://www.bloggure.info/page20">20</a>
          </li>
        </ul>

        <a href="http://www.bloggure.info/page2" class="btn">Next</a>
      </div>
    </div>
    <!-- /#main -->

    <div class="footer-wrapper">
      <footer role="contentinfo">
        <span
          >&copy; 2020 . Powered by
          <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using a theme
          based on
          <a
            href="https://mademistakes.com/work/hpstr-jekyll-theme/"
            rel="nofollow"
            >HPSTR</a
          >.</span
        >
      </footer>
    </div>
    <!-- /.footer-wrapper -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
      window.jQuery ||
        document.write(
          '<script src="http://www.bloggure.info/assets/js/vendor/jquery-1.9.1.min.js"><\/script>'
        );
    </script>
    <script src="http://www.bloggure.info/assets/js/scripts.min.js"></script>

    <!-- Asynchronous Google Analytics snippet -->
    <script>
      (function (i, s, o, g, r, a, m) {
        i["GoogleAnalyticsObject"] = r;
        (i[r] =
          i[r] ||
          function () {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(
        window,
        document,
        "script",
        "//www.google-analytics.com/analytics.js",
        "ga"
      );

      ga("create", "UA-11718843-3", "auto");
      ga("require", "linkid", "linkid.js");
      ga("send", "pageview");
    </script>

    <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = "thereisnoplacelike1"; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
        var dsq = document.createElement("script");
        dsq.type = "text/javascript";
        dsq.async = true;
        dsq.src = "//" + disqus_shortname + ".disqus.com/embed.js";
        (
          document.getElementsByTagName("head")[0] ||
          document.getElementsByTagName("body")[0]
        ).appendChild(dsq);
      })();

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
        var s = document.createElement("script");
        s.async = true;
        s.type = "text/javascript";
        s.src = "//" + disqus_shortname + ".disqus.com/count.js";
        (
          document.getElementsByTagName("HEAD")[0] ||
          document.getElementsByTagName("BODY")[0]
        ).appendChild(s);
      })();
    </script>
    <noscript
      >Please enable JavaScript to view the
      <a href="http://disqus.com/?ref_noscript"
        >comments powered by Disqus.</a
      ></noscript
    >
    <a href="http://disqus.com" class="dsq-brlink"
      >comments powered by <span class="logo-disqus">Disqus</span></a
    >
  </body>
</html>
