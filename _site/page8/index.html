<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Site Title</title>
<meta name="description" content="Describe this nonsense.">
<meta name="keywords" content="Jekyll, theme, themes, responsive, blog, modern">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="/page8/index.html">
<meta property="og:site_name" content="Site Title">





<link rel="canonical" href="/page8/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Site Title Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post-index" class="feature" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="Your Name photo" class="author-photo">
					<h4>Your Name</h4>
					<p>Your bio goes here. It shouldn't be super long but a good two sentences or two should suffice.</p>
				</li>
				<li><a href="/about/">Learn More</a></li>
				<li>
					<a href="mailto:you@email.com"><i class="icon-envelope"></i> Email</a>
				</li>
				
				
				
				
				
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/archive/">All Posts</a></li>
				<li><a href="/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="/theme-setup">Theme Setup</a></li><li><a href="http://mademistakes.com">External Link</a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
    <div class="entry-image"><img src="/images/abstract-1.jpg" alt="Latest Posts" itemprop="image">
      <div class="image-credit">Image source: <a href="http://www.dargadgetz.com/ios-7-abstract-wallpaper-pack-for-iphone-5-and-ipod-touch-retina/">dargadgetz</a></div><!-- /.image-credit -->
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Site Title</h1>
      <h2 itemprop="name">Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  
<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2012-02-23T00:00:00-05:00" itemprop="datePublished"><a href="/.git/work/gitlabhq">February 23, 2012</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="/about" title="About Your Name" itemprop="url">Your Name</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="/.git/work/gitlabhq" rel="bookmark" title="GitLabHQ and a good branching model" itemprop="url">GitLabHQ and a good branching model</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <!--:en--><h2>Migrating to Git</h2>
<img src="http://www.bloggure.info/wp-content/uploads/2011/12/GitLogo.jpg" alt="" title="GitLogo" width="97" height="202" class="alignright size-full wp-image-491" />
At work, we made the move from subversion to git as our version control tool. I used git for a few times before we migrate the whole project thanks to the git-svn bridge, and, apart from the usual headache when it comes to merging branches, I was rather convinced we would make the migration to git. To explain what branching model I was expecting to use, I dig the Internet for a good tool, hoping to migrate our so "1.0" Trac version control and issue management to a more github like one.

<h2>Founds</h2>
There is not as much tools as I first thought, I found <a href="https://gitorious.org/gitorious">gitorious</a>, which seems to be a good tool, but it looks complicated to setup and lacks (or I didn't find it) a good graphical representation of the branches in the repository. 

I came across <a href="http://gitlabhq.com/">gitlabhq</a>, which is a starting project, but promising as it aims to mimic github in many ways. I've tried it and I must say I am very impressed, it is now one of the tool we use internally, it is not yet a perfect tool but it does its jobs very well. We still use our old Trac environment with git integration to hunt down our bugs and control ticket workflow with commit messages (blog post to come). We also use Trac's wiki to write our internal documentation toward developpers.
<!--:--><!--:fr--><h2>Migration vers Git</h2>
<img src="http://www.bloggure.info/wp-content/uploads/2011/12/GitLogo.jpg" alt="" title="GitLogo" width="97" height="202" class="alignright size-full wp-image-491" />
Au travail, nous avons pris la décision de passer de Subversion à Git comme outil de gestion de sources. J'ai utilisé git quelques mois avant de migrer l'intégralité du projet pour tout le monde grace à l'outil git-svn. Et, mis à part les problèmes habituels de merge entre branches svn, j'étais plutôt enthousiaste concernant la migration vers git. L'idée était de disposer d'un outil plus puissant pour pouvoir séparer plus efficacement les développements en utilisant des branches. Pour expliquer quelle technique j'avais envie de mettre en place pour gérer nos branches de développement, j'ai cherché l'outil qu'il nous fallait, tout en espérant pouvoir migrer notre outil de gestion d'incident actuel (Trac) vers un se rapprochant plus de github.

<h2>Résultats</h2>
Il n'y a pas tant d'outils que je le pensais au préalable. J'ai trouvé <a href="https://gitorious.org/gitorious">gitorious</a>, qui a l'air d'être un bon outil, mais l'installation à l'air complexe et ne propose pas (où je suis passé à côté) d'outil permettant de visualiser de façon graphique les branches.

Je suis tombé sur <a href="http://gitlabhq.com/">GitLabHQ</a>, qui est un projet naissant, mais prometteur puisque l'objectif est de fournir une alternative similaire à github. Je l'ai essayé et je dois dire que je suis réellement très impressionné, à tel point que c'est maintenant un des outils que nous utilisons en complèment de Trac.
Nous utilisons toujours Trac pour gérer nos tickets de bugs et pour contrôler leur workflow à l'aide de messages de commit (il y aura un post ici à ce sujet dans quelques temps). Nous utilisons aussi le wiki de Trac pour la documentation développeur (nous n'avons pas encore pris le temps de la migrer vers GitLabHQ, ce qui arrivera certainement).
<!--:--><!--more--><!--:en-->
<h2>GitLabHQ</h2>
<h3>Repository management</h3>
<img src="http://www.bloggure.info/wp-content/uploads/2012/02/gitlabhq-logo.png" alt="" title="gitlabhq-logo" width="175" height="60" class="alignright size-full wp-image-528" />
Our SVN setup was hooked to our internal LDAP for central authentication across our servers (with pam-ldap), making the move to git made this part rubbish because everything is now handled by ssh key exchange. If you've played a bit with gitosis or gitolite, you have probably seen it's not as straightforward as it seems granting a new user access to a repository. You have to clone the special administrative repository and copy public keys, edit configuration file and push this back to the server. This is a  simple but potentially time-consuming  operation. GitLabHQ provides a GUI allowing to add projects, users, keys.

<h3>User management</h3>
It handles granting permissions in the underlying gitolite server by using the keys the user configure. The workflow of adding a new user is simple, you go to the administrative interface of gitlab, select the "add user" link, fill in basic informations for that user (login/password/mail) and the user, until he sets up its key, has a nag message on the top inviting him to add a key. There is only a simple form to fill with the key "nickname" and the key itself and it is done. If a user changes computer or got multiple ones, he can easily add another key to its profile, there is no need to ask the git administrator to add it.

<h3>Project management</h3>
It is easy to setup new projects, GitlabHQ provides a section in its GUI allowing to add a project very easily, the same procedure as the one necessary for adding a user apply : a simple form, then you can set up permission for users (read-only / push-pull, web only access...)<br/>
Once a project created, you can manage it via the rich web interface GitLab offers.
There is : 
<ul>
<li>an integrated issue tracker (without workflow, as simple as the one in github, an issue is open or closed),</li>
<li>a "merge request" section, you can view it as pull requests in github, it allows a developper to notify a reviewer its feature is ready to be merged into another branch (allowing code review),</li>
<li>a code browser with built-in comment system (with line note...),</li>
<li>a network graph tool (nice graphical representation of your branches),</li>
<li>a snippet mode to share code sample</li>
<li>a few more features, I have to admit I have enough with what I stated above.</li>
</ul>

<h3>Difficulties</h3>
GitLabHQ is a project depending on a variety of tools, initial setup is very well explained in the wiki pages of the project, I suggest you follow the guide to install this tool, otherwise you might run into troubles.<br/>
Sometimes GitLabHQ does not seems to work, it gives a 500 error, if it happens, don't forget to check the logs/production.log file for errors. There is still a few bugs, but as this project is open source, feel free to open an issue on the github page of the project and/or contribute back a patch via a pull request.

<h3>Upgrading GitLabHQ</h3>
GitLabHQ's team wants to release every month, to upgrade, simply follow these steps : 
<pre class='brush: shell'>
#stop your server
git pull origin stable
bundle install --without development test
bundle exec rake db:migrate RAILS_ENV=production
#start your server
</pre>
This should make the move to the new version, please check version notice if there is some special steps to take.<br/>
You might want to create a local branch containing your configuration (config/gitlab.yml), and to upgrade, simply rebase your local config branch against the tag corresponding to the release (please notice that with 2.2 release, this is not necessary anymore)


<h2>Migrating from Subversion to git</h2>
The migration is very simple, and very well explained on a <a href="http://stackoverflow.com/questions/79165/how-to-migrate-svn-with-history-to-a-new-git-repository">stackoverflow answer</a>.
Once your svn repository is imported as a git one, you can push it to GitLabHQ. To do so create a repository in GitLabHQ, and just follow the instruction given in the project page (git add origin ... git push)


<h2>Branching model</h2>
We migrate to git hoping to find and setup a good and easy branching model. I think we now have something really nice :
<ul>
<li>master : branch we merge our feature branches into, the next release branch, the one being actively tested,</li>
<li>stable : branch corresponding to the production code, from which we branch when bugfixing,</li>
<li>fix/$issue_number : temporary fix branch, rarely pushed to central repository, coming from stable branch, merged to stable for next hotfix release, and cherry-picked to master</li>
<li>feature/$feature_name : new feature branch, coming from master, merged to master, can be pushed to central repository if the feature is big enough,</li>
<li>refactor/$refactor_topic : short lived branch, coming from master, merged to master</li>
</ul>
<h3>Merging changes</h3>
Once a feature / fix / refactor is considered complete and stable by the developer(s), we use the <strong>merge request</strong> feature of GitLabHQ to trigger a manual code review, and once it satisfies our quality standard we merge it into the destination branch.

<h2>Results</h2>
In the end, you got something like this :
<img src="http://www.bloggure.info/wp-content/uploads/2012/02/gitlabhq-branches.png" alt="" title="gitlabhq-branches" width="838" height="540" class="aligncenter size-full wp-image-524" /><!--:--><!--:fr-->
<h2>GitLabHQ</h2>
<h3>Gestion de dépôts</h3>
<img src="http://www.bloggure.info/wp-content/uploads/2012/02/gitlabhq-logo.png" alt="" title="gitlabhq-logo" width="175" height="60" class="alignright size-full wp-image-528" />
Notre installation SVN est connectée à notre LDAP interne qui gère l'authentification sur nos différents serveurs (avec l'aide de pam-ldap). La migration vers Git a rendu cette partie inutile puisque tout est géré maintenant par échange de clefs SSH. 

Si vous avez déjà joué avec gitosis ou gitolite, vous avez probablement remarqué que l'ajout d'un utilisateur à un dépôt n'est pas aussi simple qu'il paraît. Il faut clone le dépôt spécial d'administration, copier la clef publique de l'utilisateur, modifier les fichiers de configuration et effectuer un push de ces modifications vers le serveur.
Une fois bien compris, cette opération est simple mais potentiellement chronophage, GitLabHQ fournit une interface simple permettant d'ajouter des utilisateurs, des projets et des clefs SSH.

<h3>Gestion des utilisateurs</h3>
Il permet de gérer les permissions pour un utilisateur en mettant à jour le serveur gitolite avec les clefs SSH que l'utilisateur peut renseigner. 
La technique d'ajout d'un nouvel utilisateur est simple, vous vous rendez sur la partie administration de l'interface de GitLabHQ, sélectionnez le lien "ajouter un utilisateur", remplissez les informations demandées (login/mot de passe/adresse mail). L'utilisateur recevra un mail avec son adresse mail et, tant qu'il n'aura pas renseigné une clef SSH, aura un message l'invitant à le faire.
Il suffit de remplir un formulaire simple avec le "surnom" de la clef et la clef en elle même et l'utilisateur aura accès aux dépôts. L'avantage est évident, si un utilisateur change de machine, ou en a plusieurs, il pourra très simplement ajouter une nouvelle clef à son profil, sans avoir besoin de demander à l'administrateur de Git de le faire.

<h3>Gestion de project</h3>
Il est simple de configurer de nouveaux projets, GitLabHQ fournit une section dans son interface permettant de le faire très simplement. La procédure est très semblable à celle permettant d'ajouter un utilisateur : un formulaire simple, puis la définition des permissions pour les utilisateurs (lecture seule / push-pull / accès web uniquement...)<br/>
Lorsqu'un projet est créé, vous pouvez le gérer via l'interface web de GitLabHQ.
Il y a : 
<ul>
<li>un gestionnaire de ticket (sans workflow, aussi simple que le système de github, un ticket est ouvert ou clos),</li>
<li>une section "merge request" , similaire à ce que sont les pull requests dans github, ceci permet à un développeur de demander une revue de code à un autre avant d'intégrer le code au sein d'une autre branche,</li>
<li>un navigateur de code avec un système de commentaires (à la ligne près,</li>
<li>un outil de représentation graphique des branches,</li>
<li>une catégorie permettant d'échanger des morceaux de code,</li>
<li>un wiki,</li>
<li>quelques autres fonctionnalités que je n'ai pas encore exploré, puisque ce que j'ai cité plus haut est déjà très bien.</li>
</ul>

<h3>Difficultés rencontrées</h3>
GitLabHQ est un projet dépendant sur un grand nombre d'autres outils, la configuration initiale est très bien documentée dans les pages wiki du projet, je vous suggère de les suivre scrupuleusement pour éviter tout soucis de mauvaise configuration initiale.<br/>
Quelques fois GitLabHQ ne semble pas marcher, il ne ressort que des erreurs 500, si cela arrive, n'oubliez pas de consulter les logs (fichier logs/production.log) à la recherche d'erreurs. Il y a encore quelques bugs, mais étant donné que ce projet est open-source, n'hésitez pas à effectuer des rapports de bugs et à même contribuer des patchs via le système de pull request de github.

<h3>Mise à jour de GitLabHQ</h3>
L'équipe de GitLabHQ planifie une nouvelle version tous les moins, pour effectuer la mise à jour, suivez simplement ces étapes :
<pre class='brush: shell'>
#arrêtez votre serveur
git pull origin stable
bundle install --without development test
bundle exec rake db:migrate RAILS_ENV=production
#redémarrez votre serveur
</pre>

Ceci devrait suffir pour passer à une nouvelle version, mais vérifiez quand même si des étapes spéciales sont nécessaires en vérifiant les notes de version.<br/>
Vous pouvez vous créer une branche locale contenant votre configuration (config/gitlab.yml), et pour mettre à jour, effectuez un simple git rebase sur votre branche pour inclure les modifications de la branche stable (depuis la version 2.2, le fichier de configuration n'est plus dans les fichiers touchés par un upgrade, cette étape est donc optionnelle)


<h2>Migrating from Subversion to git</h2>
La migration est très simple, et très bien expliquée sur la <a href="http://stackoverflow.com/questions/79165/how-to-migrate-svn-with-history-to-a-new-git-repository">page stackoverflow suivante</a>.
Une fois que votre dépôt SVN est importé en tant que dépôt Git, vous pouvez effectuer un push vers GitLabHQ. Pour se faire, créez un dépôt dans GitLabHQ, et suivez les instructions données dans GitLabHQ sur la page du projet que vous venez d'ajouter (git add origin ... git push)


<h2>Gestion des branches</h2>
Nous avons migré vers Git en espérant trouver un moyen simple et efficace de gérer les branches. Nous avons maintenant quelque chose de vraiment sympa :
<ul>
<li>master : la branche cible de toutes nos nouvelles fonctionnalités, celle qui est en recette active,</li>
<li>stable : la branche qui correspond au code de production, depuis laquelle nous effectuons les corrections de bugs,</li>
<li>fix/$issue_number : branche temporaire correspondant à un correctif, propagée sur le dépôt central pour en effectuer la revue de code. Provient de la branche stable, sera mergée sur la branche stable pour la livraison de consolidation, et cherry-pickée sur master si le besoin s'en fait sentir,</li>
<li>feature/$feature_name : branche correspondant à une nouvelle fonctionnalité, provenant de master, mergée sur master, propagée sur master pour effectuer la revue de code,</li>
<li>refactor/$refactor_topic : branche à durée de vie courte, provenant de master, mergée sur master</li>
</ul>
<h3>Fusionner les branches</h3>
Une fois qu'une fonctionnalité, un correctif ou un refactor est considéré terminé et stable par le ou les développeurs, nous utilisons la fonctionnalité de <strong>merge request</strong> de GitLabHQ pour déclencher une revue de code manuelle, et une fois que nous sommes satisfait du code produit (qu'il respecte la qualité qu'on en attend), nous effectuons le merge (manuellement pour le moment) dans la branche de destination.

<h2>Résultats</h2>
Au final, nous obtenons quelque chose comme ceci  :
<img src="http://www.bloggure.info/wp-content/uploads/2012/02/gitlabhq-branches.png" alt="" title="gitlabhq-branches" width="838" height="540" class="aligncenter size-full wp-image-524" /><!--:-->



  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2012-02-17T00:00:00-05:00" itemprop="datePublished"><a href="/thoughts/mac-os-x-10-8-mountain-lion-thoughts">February 17, 2012</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="/about" title="About Your Name" itemprop="url">Your Name</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="/thoughts/mac-os-x-10-8-mountain-lion-thoughts" rel="bookmark" title="Mac OS X 10.8 - Mountain Lion thoughts" itemprop="url">Mac OS X 10.8 - Mountain Lion thoughts</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <!--:en-->Apple silently announced their future release of Mac OS X operating system to come this summer (2012). The pages on Apple website show the new features and claim this release is the missing bridge between the iPad and the Macs, I think it narrows the gap between their two OSes even more than they claim, I fear a completely bound to Application Store operating system requiring jailbreak to be free in OS X 10.9...<!--:-->



  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2012-02-12T00:00:00-05:00" itemprop="datePublished"><a href="/nosql/work/mongodb-request-failing-when-upgrading-1-8-2-x">February 12, 2012</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="/about" title="About Your Name" itemprop="url">Your Name</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="/nosql/work/mongodb-request-failing-when-upgrading-1-8-2-x" rel="bookmark" title="mongoDB request failing when upgrading (1.8 > 2.x)" itemprop="url">mongoDB request failing when upgrading (1.8 > 2.x)</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <!--:en-->At work we faced a strange issue with mongoDB 2.x. Whereas our requests were working perfectly with mongoDB 1.8 we always got errors. The message mongoDB was firing at us was of the form : 

<pre class="brush: java">
Caused by: com.mongodb.MongoException: assertion db/../bson/bsonobjbuilder.h:127
       at com.mongodb.MongoException.parse(MongoException.java:82)
</pre>
<img src="http://www.bloggure.info/wp-content/uploads/2012/02/mongo.png" alt="" title="mongoDB leaf" width="128" height="128" class="alignright size-full wp-image-507" />
I found the following issue in <a href="https://jira.mongodb.org/browse/SERVER-3846">mongoDB's Jira</a> but apparently nothing to do with our requests (we are not using empty properties indexes), it takes me a lot of time to figure out that, at times, our request were sorted on empty properties (<a href="https://jira.mongodb.org/browse/SERVER-3874">as stated here</a>). The fix is really simple, <strong>do not sort on empty properties</strong> !

As it takes me times to find this and I did not find any blog post explaining this, I hope it will help another developer.<!--:--><!--:fr-->Nous avons rencontré un problème assez étrange avec mongoDB 2.x. Alors que nos requêtes existantes marchaient sans aucun soucis avec mongoDB 1.8. mongoDB répondait invariablement avec l'erreur suivante :

<pre class="brush: java">
Caused by: com.mongodb.MongoException: assertion db/../bson/bsonobjbuilder.h:127
       at com.mongodb.MongoException.parse(MongoException.java:82)
</pre>
<img src="http://www.bloggure.info/wp-content/uploads/2012/02/mongo.png" alt="" title="mongoDB leaf" width="128" height="128" class="alignright size-full wp-image-507" />
J'ai bien sur trouvé le bug suivant sur <a href="https://jira.mongodb.org/browse/SERVER-3846">le Jira du projet mongoDB</a> mais apparement rien à voir avec nos requêtes (nous n'avons pas d'index sur des propriétés vides). Cela m'a pris pas mal de temps avant de comprendre que, parfois, nos requêtes étaient parfois triées sur des propriétés vides (<a href="https://jira.mongodb.org/browse/SERVER-3874">comme précisé ici</a>).
Le correctif est vraiment simple, <strong>ne triez pas sur des propriétés vides</strong> !

Puisque j'ai mis pas mal de temps à comprendre ce qui se passait et que je n'ai trouvé aucun billet relatif, j'espère que ça aidera un autre développeur.<!--:-->



  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2011-12-19T00:00:00-05:00" itemprop="datePublished"><a href="/.git/.maven/git-bisect-saved-my-day">December 19, 2011</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="/about" title="About Your Name" itemprop="url">Your Name</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="/.git/.maven/git-bisect-saved-my-day" rel="bookmark" title="git bisect saved my day !" itemprop="url">git bisect saved my day !</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    This morning one of the Jenkins job went red, 5 tests were failing, and it was very difficult to find out which commit caused the break (69 commits were concerned), I used git bisect to run maven tests to find the guilty one. Here is a quick howto:
<ul>
	<li>find a stable commit (in my case it was <strong>2ea34cf09cc83804cdcc445476bfb597c617a034</strong>)</li>
	<li>write a short script (myScript.sh) allowing you to run the tests:</li>
</ul>
<pre class="brush: shell">#!/bin/sh
 mvn -f path/to/my/pom.xml -Dtest=MyTestClass test</pre>
<ul>
	<li>git bisect start <strong>HEAD</strong> <strong>2ea34cf09cc83804cdcc445476bfb597c617a034</strong></li>
	<li>git bisect run ./myScript.sh</li>
</ul>
That's all, in a few runs (6 in my cases), git found out the commit causing the test failure, a simple git revert and tests were back to green !



  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2011-12-18T00:00:00-05:00" itemprop="datePublished"><a href="/.shell/dotfiles-or-easily-manage-your-shell-environment">December 18, 2011</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="/about" title="About Your Name" itemprop="url">Your Name</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="/.shell/dotfiles-or-easily-manage-your-shell-environment" rel="bookmark" title="dotfiles or easily manage your shell environment" itemprop="url">dotfiles or easily manage your shell environment</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <!--:en--><img src="http://www.bloggure.info/wp-content/uploads/2011/12/Capture-d’écran-2011-12-18-à-18.55.51.png" alt="" title="dotfiles" width="87" height="68" class="alignright size-full wp-image-483" />
<p>Like many terminal geek, I have a bunch of dot rc files allowing me to configure my environment. While this is a very powerful way to setup an environment, it is painful to log in a machine and set it up like you are used to, you often discover too late your favorite alias is missing.</p>
<p>
I found a nice way to manage this thing by browsing the <a href="https://github.com/tomsquest/dotfiles">github account</a> of one of a man coming frequently to the <a href="http://www.toursjug.org/">Tours Java User Group</a> meetings. It is commonly called dotfiles and can not be better named I found.</p>
<p>
I <a href="https://github.com/CedricGatay/dotfiles">forked the repository</a> to customize it to my needs, it is now possible to define aliases and to configure the shell on a per machine basis. 
To install, you will only need ruby and rake (manual install is also possible by symlinking the files) :
<ul>
	<li>cd; git clone git://github.com/CedricGatay/dotfiles.git .dotfiles</li>
	<li>cd .dotfiles; rake install</li>
        <li>logout and login, or source your .zshrc / .bashrc</li>
</lu>
Please notice that I am a zsh user, the bashrc file provided should work but it will surely need some fixes. There is no better way than digging into the source to understand and adjust it.
</p><!--:--><!--:fr--><img src="http://www.bloggure.info/wp-content/uploads/2011/12/Capture-d’écran-2011-12-18-à-18.55.51.png" alt="" title="dotfiles" width="87" height="68" class="alignright size-full wp-image-483" />
<p>Comme beaucoup de geek, j'affectionne tout particulièrement la ligne de commande. J'ai tout un lot de fichier de configuration à la racine de mon dossier personnel. Bien que ce soit une façon très puissante de configurer son environnement de travail, c'est perturbant de se connecter sur une machine et de ne pas retrouver ses habitudes.</p>
<p>
J'ai trouvé un moyen simple et élégant de de gérer ce cas de figure en naviguant sur un<a href="https://github.com/tomsquest/dotfiles">dépôt github</a> d'un des membre régulier du <a href="http://www.toursjug.org/">Tours Java User Group</a>. Le nom courant de ce genre de dépôt est "dotfiles" et je trouve qu'il ne pourrait pas avoir de meilleur nom.</p>
<p>
J'ai donc<a href="https://github.com/CedricGatay/dotfiles">forké le dépôt</a> pour le faire correspondre à mes besoins. J'ai rajouté une fonctionnalité qui était nécessaire pour moi : la possibilité d'avoir des configurations et des alias sensiblement différents en fonction de la machine sur laquelle le fichier est déployé (j'utilise plusieurs OS, les chemins sont donc parfois différents).
Pour l'installer, il suffit de disposer de ruby et rake (une installation manuelle est aussi possible en créant les liens symboliques que rake crée) :
<ul>
	<li>cd; git clone git://github.com/CedricGatay/dotfiles.git .dotfiles</li>
	<li>cd .dotfiles; rake install</li>
        <li>logout and login, or source your .zshrc / .bashrc</li>
</lu>
Notez que je suis un utilisateur de zsh, le fichier bashrc devrait marcher mais il présente certainement des bugs puisqu'il date de quelques années. Dans tous les cas, je vous encourage à vous plonger dans le source pour comprendre ce qui se passe et adapter le tout à vos besoins.
</p><!--:-->



  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    
      <a href="/page7" class="btn">Previous</a>
    
  
  <ul class="inline-list">
    <li>
      
        <a href="">1</a>
      
    </li>
    
      <li>
        
          <a href="/page2">2</a>
        
      </li>
    
      <li>
        
          <a href="/page3">3</a>
        
      </li>
    
      <li>
        
          <a href="/page4">4</a>
        
      </li>
    
      <li>
        
          <a href="/page5">5</a>
        
      </li>
    
      <li>
        
          <a href="/page6">6</a>
        
      </li>
    
      <li>
        
          <a href="/page7">7</a>
        
      </li>
    
      <li>
        
          <span class="current-page">8</span>
        
      </li>
    
      <li>
        
          <a href="/page9">9</a>
        
      </li>
    
      <li>
        
          <a href="/page10">10</a>
        
      </li>
    
      <li>
        
          <a href="/page11">11</a>
        
      </li>
    
      <li>
        
          <a href="/page12">12</a>
        
      </li>
    
      <li>
        
          <a href="/page13">13</a>
        
      </li>
    
      <li>
        
          <a href="/page14">14</a>
        
      </li>
    
  </ul>
  
    <a href="/page9" class="btn">Next</a>
  

</div>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2013 Your Name. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>

          

</body>
</html>