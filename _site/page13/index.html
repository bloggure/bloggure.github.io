<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Latest Posts &#8211; Site Title</title>
<meta name="description" content="Describe this nonsense.">
<meta name="keywords" content="Jekyll, theme, themes, responsive, blog, modern">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Latest Posts">
<meta property="og:description" content="Describe this nonsense.">
<meta property="og:url" content="/page13/index.html">
<meta property="og:site_name" content="Site Title">





<link rel="canonical" href="/page13/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Site Title Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post-index" class="feature" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<nav id="dl-menu" class="dl-menuwrapper" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="/images/avatar.jpg" alt="Your Name photo" class="author-photo">
					<h4>Your Name</h4>
					<p>Your bio goes here. It shouldn't be super long but a good two sentences or two should suffice.</p>
				</li>
				<li><a href="/about/">Learn More</a></li>
				<li>
					<a href="mailto:you@email.com"><i class="icon-envelope"></i> Email</a>
				</li>
				
				
				
				
				
				
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Posts</a>
			<ul class="dl-submenu">
				<li><a href="/archive/">All Posts</a></li>
				<li><a href="/tags/">All Tags</a></li>
			</ul>
		</li>
		<li><a href="/theme-setup">Theme Setup</a></li><li><a href="http://mademistakes.com">External Link</a></li>
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->


<div class="entry-header">
  
    <div class="entry-image"><img src="/images/abstract-1.jpg" alt="Latest Posts" itemprop="image">
      <div class="image-credit">Image source: <a href="http://www.dargadgetz.com/ios-7-abstract-wallpaper-pack-for-iphone-5-and-ipod-touch-retina/">dargadgetz</a></div><!-- /.image-credit -->
    </div><!-- /.entry-image -->
  
  <div class="header-title">
    <div class="header-title-wrap">
      <h1>Site Title</h1>
      <h2 itemprop="name">Latest Posts</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->

<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  
<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2010-11-14T00:00:00-05:00" itemprop="datePublished"><a href="/shelf/so-i-made-it">November 14, 2010</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="/about" title="About Your Name" itemprop="url">Your Name</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="/shelf/so-i-made-it" rel="bookmark" title="So, I made it - back to iOS a year later..." itemprop="url">So, I made it - back to iOS a year later...</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <!--:en--><img class="alignleft size-thumbnail wp-image-68" src="http://www.bloggure.info/wp-content/uploads/2010/11/ipad-150x150.png" alt="" width="105" height="105" />

I was lurking on Android based tablets and I've found a 50% bargain on an iPad, so I've bought an iPad (16Gb / Wifi).

I am really impressed by the device so far, it is really fast, its battery last for hours. It still have the bad things of iOS &lt; 4, no multitasking is really bugging me...
<em>Post updated ! I will update this post as soon as iOS 4.x will be released...</em>

<!--:--><!--:fr--><em>Cet article n'a pas été traduit, veuillez trouver ci-dessous sa version anglaise</em>

<img class="alignleft size-thumbnail wp-image-68" src="http://www.bloggure.info/wp-content/uploads/2010/11/ipad-150x150.png" alt="" width="105" height="105" />

I was lurking on Android based tablets and I've found a 50% bargain on an iPad, so I've bought an iPad (16Gb / Wifi).

I am really impressed by the device so far, it is really fast, its battery last for hours. It still have the bad things of iOS &lt; 4, no multitasking is really bugging me...
<em>Post updated ! I will update this post as soon as iOS 4.x will be released...</em>

<!--:--><!--more--><!--:en-->iOS 4.2.1 has arrived for a few weeks now. iPad is still an awesome device for me, multitasking bring the ability to play for music streamed via DLNA while surfing the web with Safari mobile. The only things I really regret is the unability to play Flash content (nowadays there is still a lot of website using it, and as a couch internet device we tend to browse those...).<!--:--><!--:fr-->iOS 4.2.1 has arrived for a few weeks now. iPad is still an awesome device for me, multitasking bring the ability to play for music streamed via DLNA while surfing the web with Safari mobile. The only things I really regret is the unability to play Flash content (nowadays there is still a lot of website using it, and as a couch internet device we tend to browse those...).<!--:-->



  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2010-11-14T00:00:00-05:00" itemprop="datePublished"><a href="/.shell/shelf/itunes-media-sharing-over-the-internet-from-a-nas">November 14, 2010</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="/about" title="About Your Name" itemprop="url">Your Name</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="/.shell/shelf/itunes-media-sharing-over-the-internet-from-a-nas" rel="bookmark" title="iTunes media sharing over the Internet from a NAS" itemprop="url">iTunes media sharing over the Internet from a NAS</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <!--:en--><a href="http://www.bloggure.info/wp-content/uploads/2010/11/free-music-head.png"><img class="alignright size-full wp-image-99" title="Music" src="http://www.bloggure.info/wp-content/uploads/2010/11/free-music-head.png" alt="" width="200" height="124" /></a>I am a big fan of music, and I like to listen to all my music wherever I am and whatever I do (specially when coding).

All my medias are stored on a NAS drive that features a little embedded linux distribution as operating system. One of the service is called iTunes media sharing (mt-daapd is the real name of the daemon).

It is really a cool feature as I can listen media stored on my NAS from whatever device on my LAN. The magic behind is called Bonjour which is a protocol that allows device to register themselves on the network and being discovered by others.

My problem is I want to be able to listen to my home music at work, and Bonjour service does not go out of my LAN. The additional thing is I want to listen to my music using iTunes (I am fond of <a title="Bowtie" href="http://bowtieapp.com" target="_blank">Bowtie</a>) on my MacBook Pro.

<!--:--><!--:fr--><em>Cet article n'a pas été traduit, veuillez trouver ci-dessous sa version anglaise</em>

<a href="http://www.bloggure.info/wp-content/uploads/2010/11/free-music-head.png"><img class="alignright size-full wp-image-99" title="Music" src="http://www.bloggure.info/wp-content/uploads/2010/11/free-music-head.png" alt="" width="200" height="124" /></a>I am a big fan of music, and I like to listen to all my music wherever I am and whatever I do (specially when coding).

All my medias are stored on a NAS drive that features a little embedded linux distribution as operating system. One of the service is called iTunes media sharing (mt-daapd is the real name of the daemon).

It is really a cool feature as I can listen media stored on my NAS from whatever device on my LAN. The magic behind is called Bonjour which is a protocol that allows device to register themselves on the network and being discovered by others.

My problem is I want to be able to listen to my home music at work, and Bonjour service does not go out of my LAN. The additional thing is I want to listen to my music using iTunes (I am fond of <a title="Bowtie" href="http://bowtieapp.com" target="_blank">Bowtie</a>) on my MacBook Pro.

<!--:--><!--more--><!--:en-->
<h1>Simulating Bonjour presence</h1>
The trick is to use a little software called <em>dns-sd </em>to register your distant IP-address as a Bonjour source, by executing the following command (replacing YOURIP with your public IP), you should see a shared library (named MYNAME) in iTunes :

[bash light="true"]
dns-sd -P MYNAME _daap._tcp. &quot;my details&quot; 3689 homemusic.local YOURIP&amp;amp;
[/bash]

If it does not work, I think you've forgotten to open the 3689 TCP port of your firewall and / or to forward it to your box running mt-daapd.
<h1>Modifying iTunes to launch dns-sd</h1>
The thing is that it is not very convenient to launch the command line with iTunes, it would be better if all was automatic.

There is a simple way of doing it that you'll have to do each times iTunes is updated, moving the actual iTunes binary to another file and trigger its launch from a small shell script.

First step is to move iTunes binary, launch a Terminal.app and type the following :

[bash light="true"]
mv /Applications/iTunes.app/Contents/MacOS/iTunes /Applications/iTunes.app/Contents/MacOS/iTunes.bin
[/bash]

Then, create the following shell script and record it under /Applications/iTunes.app/Contents/MacOS/iTunes

[bash]
#!/bin/sh
dns-sd -P MYNAME _daap._tcp. &quot;my details&quot; 3689 homemusic.local YOURIP&amp;amp;
/Applications/iTunes.app/Contents/MacOS/iTunes.bin
[/bash]

Finally, make the script executable by <em>chmod</em>ding it :

[bash light="true"]
chmod +x /Applications/iTunes.app/Contents/MacOS/iTunes
[/bash]

The next time you'll launch iTunes, the <em>dns-sd </em>service will be automatically launched, your shared media library will appear and your ears will love this !

WARNING : you actually expose your media library to everyone on the internet, I suggest you to set a password / change port number / use a SSH tunnel to circumvent this...<!--:--><!--:fr-->
<h1>Simulating Bonjour presence</h1>
The trick is to use a little software called <em>dns-sd </em>to register your distant IP-address as a Bonjour source, by executing the following command (replacing YOURIP with your public IP), you should see a shared library (named MYNAME) in iTunes :

[bash light="true"]
dns-sd -P MYNAME _daap._tcp. &quot;my details&quot; 3689 homemusic.local YOURIP&amp;amp;
[/bash]

If it does not work, I think you've forgotten to open the 3689 TCP port of your firewall and / or to forward it to your box running mt-daapd.
<h1>Modifying iTunes to launch dns-sd</h1>
The thing is that it is not very convenient to launch the command line with iTunes, it would be better if all was automatic.

There is a simple way of doing it that you'll have to do each times iTunes is updated, moving the actual iTunes binary to another file and trigger its launch from a small shell script.

First step is to move iTunes binary, launch a Terminal.app and type the following :

[bash light="true"]
mv /Applications/iTunes.app/Contents/MacOS/iTunes /Applications/iTunes.app/Contents/MacOS/iTunes.bin
[/bash]

Then, create the following shell script and record it under /Applications/iTunes.app/Contents/MacOS/iTunes

[bash]
#!/bin/sh
dns-sd -P MYNAME _daap._tcp. &quot;my details&quot; 3689 homemusic.local YOURIP&amp;amp;
/Applications/iTunes.app/Contents/MacOS/iTunes.bin
[/bash]

Finally, make the script executable by <em>chmod</em>ding it :

[bash light="true"]
chmod +x /Applications/iTunes.app/Contents/MacOS/iTunes
[/bash]

The next time you'll launch iTunes, the <em>dns-sd </em>service will be automatically launched, your shared media library will appear and your ears will love this !

WARNING : you actually expose your media library to everyone on the internet, I suggest you to set a password / change port number / use a SSH tunnel to circumvent this...<!--:-->



  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2010-11-02T00:00:00-04:00" itemprop="datePublished"><a href="/.java/work/glassfish-v3-custom-log-levels">November 02, 2010</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="/about" title="About Your Name" itemprop="url">Your Name</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="/.java/work/glassfish-v3-custom-log-levels" rel="bookmark" title="Glassfish v3.x - custom log levels" itemprop="url">Glassfish v3.x - custom log levels</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <!--:en--><img class="alignright size-full wp-image-71" src="http://www.bloggure.info/wp-content/uploads/2010/11/glassfish.png" alt="" width="92" height="50" />In Glassfish v2, you can easily set log levels using the admin console by going into <em>Application Server &gt; Logging &gt; Log Levels</em>. There you can add custom filter and change levels only by using the console.

In the new stable release of Glassfish, this option has disappeared, you can edit levels but there is no easy way to add custom filters. The trick is to alter manually the logging.properties file located in <em>&lt;yourdomain&gt;</em><em>/config</em> directory.
For example, if you want to filter out logs from Sun's Portlet Container, you have to set the following in the logging.properties file :

[code light="true"]
debug.com.sun.portlet.portletcontainer.impl.level=FINEST
[/code]

Please notice the <code>.level</code> at the end of the fully qualified name of the class hierarchy to filter. After adding the new entry, you will be able to alter level via the admin console of Glassfish, or even simpler, simply edit the file : the changes are taken on the fly (in certain conditions, you might need to restart the server) !

Hope it'll help...<!--:--><!--:fr--><img class="alignright size-full wp-image-71" src="http://www.bloggure.info/wp-content/uploads/2010/11/glassfish.png" alt="" width="92" height="50" />Dans Glassfish v2, il est facile de configurer les niveaux de log en utilisant la console d'administration en allant dans les catégories <em>Application Server &gt; Logging &gt; Log Levels</em>. D'ici vous pouvez rajouter des niveaux personnalisés et changer les niveaux de façon graphique.

Dans la nouvelle version stable de Glassfish, cette option a disparu, vous pouvez éditer les niveaux mais il n'y a pas de système simple permettant d'ajouter des niveaux personnalisés. L'astuce est de modifier le fichier logging.properties présent dans le répertoire  <em>&lt;yourdomain&gt;</em><em>/config</em>.
Par exemple, si vous voulez filtrer les logs du container de portlets de Sun vous devez ajouter la ligne suivante dans votre fichier  logging.properties :

[code light="true"]
debug.com.sun.portlet.portletcontainer.impl.level=FINEST
[/code]

Prêtez attention a l'ajout de <code>.level</code> à la fin du nom complet de la class à filtrer. Après avoir ajouté de nouvelles entrées, vous pourrez changer le niveau via l'administration de Glassfish, ou, encore plus simple, éditer de nouveau le fichier, les changements sont pris à la volée (dans certaines conditions, un redémarrage du serveur peut être requis) ! 

En espérant que ça aide quelques personnes...<!--:-->



  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2010-11-01T00:00:00-04:00" itemprop="datePublished"><a href="/.java/.maven/work/getting-source-revision-for-a-deployed-app-using-maven-and-a-servlet">November 01, 2010</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="/about" title="About Your Name" itemprop="url">Your Name</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="/.java/.maven/work/getting-source-revision-for-a-deployed-app-using-maven-and-a-servlet" rel="bookmark" title="Getting source revision for a deployed app using Maven and a Servlet" itemprop="url">Getting source revision for a deployed app using Maven and a Servlet</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <!--:en--><img class="alignright size-full wp-image-74" src="http://www.bloggure.info/wp-content/uploads/2010/11/Maven_logo1.gif" alt="" width="274" height="70" />With our modern version control systems, we could assume we know for every single release we make the exact source code revision that corresponds. But, in the hurry of a bug found by your dear clients (or your product owner),  you can't find the corresponding tag in your VCS, it will make the whole patch process really difficult. You will have to find the exact revision, extract it and debug to patch (or backport an existing patch).

I will explain a little trick to make the find the revision thing a lot easier (I am assuming you're using maven to build your projects) : <a title="maven-buildnumber-plugin" href="http://mojo.codehaus.org/buildnumber-maven-plugin/">maven-buildnumber-plugin</a>

<!--:--><!--:fr--><em>Cet article n'a pas été traduit, veuillez trouver ci-dessous sa version anglaise</em>

<img class="alignright size-full wp-image-74" src="http://www.bloggure.info/wp-content/uploads/2010/11/Maven_logo1.gif" alt="" width="274" height="70" />With our modern version control systems, we could assume we know for every single release we make the exact source code revision that corresponds. But, in the hurry of a bug found by your dear clients (or your product owner),  you can't find the corresponding tag in your VCS, it will make the whole patch process really difficult. You will have to find the exact revision, extract it and debug to patch (or backport an existing patch).

I will explain a little trick to make the find the revision thing a lot easier (I am assuming you're using maven to build your projects) : <a title="maven-buildnumber-plugin" href="http://mojo.codehaus.org/buildnumber-maven-plugin/">maven-buildnumber-plugin</a>

<!--:--><!--more--><!--:en-->
<h2>Embed revision into artifacts</h2>
By using this plugin you can easily embbed revision informations into your artifacts, the configuration is, as always with maven, as easy as A-B-C, just add the following to your projects' pom :

[code lang="xml"]
&lt;profile&gt;
    &lt;id&gt;buildnumbering&lt;/id&gt;
    &lt;build&gt;
       &lt;plugins&gt;
           &lt;plugin&gt;
               &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
               &lt;artifactId&gt;buildnumber-maven-plugin&lt;/artifactId&gt;
               &lt;version&gt;1.0-beta-4&lt;/version&gt;
               &lt;executions&gt;
                  &lt;execution&gt;
                     &lt;phase&gt;validate&lt;/phase&gt;
                     &lt;goals&gt;
                         &lt;goal&gt;create&lt;/goal&gt;
                     &lt;/goals&gt;
                 &lt;/execution&gt;
               &lt;/executions&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                       &lt;id&gt;buildNumber&lt;/id&gt;
                       &lt;configuration&gt;
                          &lt;archive&gt;
                             &lt;manifestEntries&gt;
                                &lt;Implementation-Build&gt;
                                      ${buildNumber}
                                &lt;/Implementation-Build&gt;
                             &lt;/manifestEntries&gt;
                          &lt;/archive&gt;
                      &lt;/configuration&gt;
                   &lt;/execution&gt;
               &lt;/executions&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-ear-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                   &lt;archive&gt;
                      &lt;manifestEntries&gt;
                         &lt;Implementation-Build&gt;
                               ${buildNumber}
                         &lt;/Implementation-Build&gt;
                      &lt;/manifestEntries&gt;
                   &lt;/archive&gt;
                &lt;/configuration&gt;
             &lt;/plugin&gt;
         &lt;/plugins&gt;
     &lt;/build&gt;
&lt;/profile&gt;
[/code]

We tell maven to use the maven-build-number plugin during the validate phase and we add the property <em>buildNumber </em>to the manifest entries of the ear and war we can produce (useful if we are in a multimodule pom). This setup is performed under a specific profile and can be triggered by executing maven this way :

[code lang="bash"]mvn clean install -Pbuildnumbering[/code]

If you look at resulting artifacts, the META-INF/MANIFEST.MF files contain Implementation-Build: #### (where #### is the current revision on your SCM).
<h2>Get revision number at runtime</h2>
Now that the revision is stored in our artifacts, we need a way to figure out, at runtime, which revision is deployed, the basic idea is to have a servlet get this info for us, and dump it on your web browser. For confidentiality purpose, it might be useful to put an authorization filter on top of this servlet, but it won't be covered in this post.

The code for the servlet follows :

[code lang="java"]
/**
  * Package and import are ommited on purpose
  * User: cgatay Date: 17 oct. 2010 Time: 13:34:59
  */
public class VersionServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        try {
            String appServerHome = getServletContext().getContext(&quot;/&quot;).getRealPath(&quot;/&quot;);
            final int lastSlash = appServerHome.lastIndexOf(File.separator);
            final int beforeLastSlash = appServerHome.lastIndexOf(File.separator, lastSlash-1);
            appServerHome = appServerHome.substring(0, beforeLastSlash);

            final File file = new File(appServerHome);
            if (file.exists() &amp;&amp; file.canRead() &amp;&amp; file.isDirectory()) {
                List&lt;String&gt; listFiles = new ArrayList&lt;String&gt;(Arrays.asList(file.list()));
                listFiles.add(0, &quot;&quot;);
                for (String s : listFiles) {
                    File manifestFile = new File(appServerHome + File.separator + s, &quot;META-INF/MANIFEST.MF&quot;);
                    if (manifestFile.exists()) {
                        dumpManifestInfo(resp, manifestFile, s);
                    }
                }
            }
            resp.setStatus(200);
        } catch (IOException e) {
            e.printStackTrace();
            resp.setStatus(500);
            resp.getOutputStream().print(&quot;Cannot retrieve version data !&quot;);
        }
    }

    private void dumpManifestInfo(HttpServletResponse resp, File manifestFile, String module) throws IOException {
        Manifest mf = new Manifest();
        mf.read(new FileInputStream(manifestFile));

        Attributes atts = mf.getMainAttributes();
        resp.getOutputStream().println(&quot; ============================ &quot;);
        resp.getOutputStream().println(&quot;Module : &quot; + (module.isEmpty() ? &quot;EAR&quot; : module));
        resp.getOutputStream().println(&quot;Build: &quot; + atts.getValue(&quot;Implementation-Build&quot;));
    }
}

[/code]

Just mount this Servlet via your web.xml, add a filter on top and you're gone.

We assume that if the module is empty, we are at the root of an EAR file.

This is confirmed to work under Glassfish application server, it might work with other application servers (path might need to be corrected), anyway, I'd love to get feedback on this.<!--:--><!--:fr-->
<h2>Embed revision into artifacts</h2>
By using this plugin you can easily embbed revision informations into your artifacts, the configuration is, as always with maven, as easy as A-B-C, just add the following to your projects' pom :

[code lang="xml"]
&lt;profile&gt;
    &lt;id&gt;buildnumbering&lt;/id&gt;
    &lt;build&gt;
       &lt;plugins&gt;
           &lt;plugin&gt;
               &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
               &lt;artifactId&gt;buildnumber-maven-plugin&lt;/artifactId&gt;
               &lt;version&gt;1.0-beta-4&lt;/version&gt;
               &lt;executions&gt;
                  &lt;execution&gt;
                     &lt;phase&gt;validate&lt;/phase&gt;
                     &lt;goals&gt;
                         &lt;goal&gt;create&lt;/goal&gt;
                     &lt;/goals&gt;
                 &lt;/execution&gt;
               &lt;/executions&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                       &lt;id&gt;buildNumber&lt;/id&gt;
                       &lt;configuration&gt;
                          &lt;archive&gt;
                             &lt;manifestEntries&gt;
                                &lt;Implementation-Build&gt;
                                      ${buildNumber}
                                &lt;/Implementation-Build&gt;
                             &lt;/manifestEntries&gt;
                          &lt;/archive&gt;
                      &lt;/configuration&gt;
                   &lt;/execution&gt;
               &lt;/executions&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-ear-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                   &lt;archive&gt;
                      &lt;manifestEntries&gt;
                         &lt;Implementation-Build&gt;
                               ${buildNumber}
                         &lt;/Implementation-Build&gt;
                      &lt;/manifestEntries&gt;
                   &lt;/archive&gt;
                &lt;/configuration&gt;
             &lt;/plugin&gt;
         &lt;/plugins&gt;
     &lt;/build&gt;
&lt;/profile&gt;
[/code]

We tell maven to use the maven-build-number plugin during the validate phase and we add the property <em>buildNumber </em>to the manifest entries of the ear and war we can produce (useful if we are in a multimodule pom). This setup is performed under a specific profile and can be triggered by executing maven this way :

[code lang="bash"]mvn clean install -Pbuildnumbering[/code]

If you look at resulting artifacts, the META-INF/MANIFEST.MF files contain Implementation-Build: #### (where #### is the current revision on your SCM).
<h2>Get revision number at runtime</h2>
Now that the revision is stored in our artifacts, we need a way to figure out, at runtime, which revision is deployed, the basic idea is to have a servlet get this info for us, and dump it on your web browser. For confidentiality purpose, it might be useful to put an authorization filter on top of this servlet, but it won't be covered in this post.

The code for the servlet follows :

[code lang="java"]
/**
  * Package and import are ommited on purpose
  * User: cgatay Date: 17 oct. 2010 Time: 13:34:59
  */
public class VersionServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        try {
            String appServerHome = getServletContext().getContext(&quot;/&quot;).getRealPath(&quot;/&quot;);
            final int lastSlash = appServerHome.lastIndexOf(File.separator);
            final int beforeLastSlash = appServerHome.lastIndexOf(File.separator, lastSlash-1);
            appServerHome = appServerHome.substring(0, beforeLastSlash);

            final File file = new File(appServerHome);
            if (file.exists() &amp;&amp; file.canRead() &amp;&amp; file.isDirectory()) {
                List&lt;String&gt; listFiles = new ArrayList&lt;String&gt;(Arrays.asList(file.list()));
                listFiles.add(0, &quot;&quot;);
                for (String s : listFiles) {
                    File manifestFile = new File(appServerHome + File.separator + s, &quot;META-INF/MANIFEST.MF&quot;);
                    if (manifestFile.exists()) {
                        dumpManifestInfo(resp, manifestFile, s);
                    }
                }
            }
            resp.setStatus(200);
        } catch (IOException e) {
            e.printStackTrace();
            resp.setStatus(500);
            resp.getOutputStream().print(&quot;Cannot retrieve version data !&quot;);
        }
    }

    private void dumpManifestInfo(HttpServletResponse resp, File manifestFile, String module) throws IOException {
        Manifest mf = new Manifest();
        mf.read(new FileInputStream(manifestFile));

        Attributes atts = mf.getMainAttributes();
        resp.getOutputStream().println(&quot; ============================ &quot;);
        resp.getOutputStream().println(&quot;Module : &quot; + (module.isEmpty() ? &quot;EAR&quot; : module));
        resp.getOutputStream().println(&quot;Build: &quot; + atts.getValue(&quot;Implementation-Build&quot;));
    }
}

[/code]

Just mount this Servlet via your web.xml, add a filter on top and you're gone.

We assume that if the module is empty, we are at the root of an EAR file.

This is confirmed to work under Glassfish application server, it might work with other application servers (path might need to be corrected), anyway, I'd love to get feedback on this.<!--:-->



  </div><!-- /.entry-content -->
</article><!-- /.hentry -->

<article class="hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <div class="entry-meta"><span class="entry-date date published updated"><time datetime="2010-10-29T00:00:00-04:00" itemprop="datePublished"><a href="/.android/android-switcher-widget">October 29, 2010</a></time></span><span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name" class="fn"><a href="/about" title="About Your Name" itemprop="url">Your Name</a></span></span></div><!-- /.entry-meta -->
    
      <h1 class="entry-title" itemprop="name"><a href="/.android/android-switcher-widget" rel="bookmark" title="Android Switcher Widget" itemprop="url">Android Switcher Widget</a></h1>
    
  </header>
  <div class="entry-content" itemprop="description">
    <!--:en--><img class="alignright size-full wp-image-85" title="Android Switcher Widget" src="http://www.bloggure.info/wp-content/uploads/2010/10/app_icon.png" alt="" width="64" height="64" />Hey there,
as some of you may know, I am a frequent reader (less frequent writer) on modaco's forum. Specially in the Acer Liquid's section (good device so far with an unbelieveable community).
I found a thread talking about the lack of a task switching widget (<a title="here" href="http://bit.ly/cMYqDt">http://bit.ly/cMYqDt</a>) and so I did my best to do such a thing.

If you want to go straight to the download part, scan the following QRCode with your device, else go to the read more part.
<p style="text-align: center;"><img class="aligncenter" title="Switcher Widget QRCode" src="http://chart.apis.google.com/chart?cht=qr&amp;chs=100x100&amp;chl=http://cyrket.com/qr/89862" alt="Switcher Widget QRCode" width="100" height="100" /></p>
<!--:--><!--:fr--><em>Cet article n'a pas été traduit, veuillez trouver ci-dessous sa version anglaise</em>

<img class="alignright size-full wp-image-85" title="Android Switcher Widget" src="http://www.bloggure.info/wp-content/uploads/2010/10/app_icon.png" alt="" width="64" height="64" />Hey there,
as some of you may know, I am a frequent reader (less frequent writer) on modaco's forum. Specially in the Acer Liquid's section (good device so far with an unbelieveable community).
I found a thread talking about the lack of a task switching widget (<a title="here" href="http://bit.ly/cMYqDt">http://bit.ly/cMYqDt</a>) and so I did my best to do such a thing.

If you want to go straight to the download part, scan the following QRCode with your device, else go to the read more part.
<p style="text-align: center;"><img class="aligncenter" title="Switcher Widget QRCode" src="http://chart.apis.google.com/chart?cht=qr&amp;chs=100x100&amp;chl=http://cyrket.com/qr/89862" alt="Switcher Widget QRCode" width="100" height="100" /></p>
<!--:--><!--more--><!--:en-->

The actual release is Switcher Widget 0.3.2, it features :
<ul>
	<li>skinnability : put a png file named SwitcherWidget.png at the root of your SDCard and the widget will use it as a background.</li>
	<li>top 5 running apps are shown in a dock like fashion</li>
	<li>free as in free beer ! (if you think I deserve it, don't hesitate to hit the <a title="donate link" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=4G8MY8JN9Q2PE">donate link</a> at the right...)</li>
</ul>
<p style="text-align: center;"><img class="size-full wp-image-53 aligncenter" title="Switcher Widget Screenshot 1" src="http://www.bloggure.info/wp-content/uploads/2010/10/device1.png" alt="" width="336" height="560" /><img class="size-full wp-image-52 aligncenter" title="Switcher Widget Screenshot 2" src="http://www.bloggure.info/wp-content/uploads/2010/10/device2.png" alt="" width="336" height="560" /></p>
Please let me know if it does not work for you, I'll do my best to fix it.<!--:--><!--:fr-->

The actual release is Switcher Widget 0.3.2, it features :
<ul>
	<li>skinnability : put a png file named SwitcherWidget.png at the root of your SDCard and the widget will use it as a background.</li>
	<li>top 5 running apps are shown in a dock like fashion</li>
	<li>free as in free beer ! (if you think I deserve it, don't hesitate to hit the <a title="donate link" href="https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&amp;hosted_button_id=4G8MY8JN9Q2PE">donate link</a> at the right...)</li>
</ul>
<p style="text-align: center;"><img class="size-full wp-image-53 aligncenter" title="Switcher Widget Screenshot 1" src="http://www.bloggure.info/wp-content/uploads/2010/10/device1.png" alt="" width="336" height="560" /><img class="size-full wp-image-52 aligncenter" title="Switcher Widget Screenshot 2" src="http://www.bloggure.info/wp-content/uploads/2010/10/device2.png" alt="" width="336" height="560" /></p>
Please let me know if it does not work for you, I'll do my best to fix it.<!--:-->



  </div><!-- /.entry-content -->
</article><!-- /.hentry -->


<div class="pagination">
  
    
      <a href="/page12" class="btn">Previous</a>
    
  
  <ul class="inline-list">
    <li>
      
        <a href="">1</a>
      
    </li>
    
      <li>
        
          <a href="/page2">2</a>
        
      </li>
    
      <li>
        
          <a href="/page3">3</a>
        
      </li>
    
      <li>
        
          <a href="/page4">4</a>
        
      </li>
    
      <li>
        
          <a href="/page5">5</a>
        
      </li>
    
      <li>
        
          <a href="/page6">6</a>
        
      </li>
    
      <li>
        
          <a href="/page7">7</a>
        
      </li>
    
      <li>
        
          <a href="/page8">8</a>
        
      </li>
    
      <li>
        
          <a href="/page9">9</a>
        
      </li>
    
      <li>
        
          <a href="/page10">10</a>
        
      </li>
    
      <li>
        
          <a href="/page11">11</a>
        
      </li>
    
      <li>
        
          <a href="/page12">12</a>
        
      </li>
    
      <li>
        
          <span class="current-page">13</span>
        
      </li>
    
      <li>
        
          <a href="/page14">14</a>
        
      </li>
    
  </ul>
  
    <a href="/page14" class="btn">Next</a>
  

</div>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2013 Your Name. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">HPSTR Theme</a>.</span>
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>

          

</body>
</html>